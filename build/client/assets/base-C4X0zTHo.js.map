{"version":3,"file":"base-C4X0zTHo.js","sources":["../../../app/routes/_withNav+/_withSideBar+/_manage+/base.tsx"],"sourcesContent":["import { LinkButton } from '@components/ui/Buttons';\nimport ErrorReport from '@components/ui/ErrorReport';\nimport { Attribute } from '@lib/utils';\nimport type { LoaderFunctionArgs } from '@remix-run/node';\nimport { json } from '@remix-run/node';\nimport { Outlet, useLoaderData } from '@remix-run/react';\nimport { requireUser } from '@services/user.server';\nimport { getBasesWithOrgs } from './.server/base.queries';\nimport PageHeader from '@components/ui/PageHeader';\n\nexport const loader = async ({ request }: LoaderFunctionArgs) => {\n  await requireUser(request, { permissions: Attribute.BASES_READWRITE });\n  return json({ bases: await getBasesWithOrgs() }, {\n    headers: {\n      'X-Frame-Options': 'SAMEORIGIN',\n    },\n  });\n};\n\nconst BaseIndex = () => {\n  const { bases } = useLoaderData<typeof loader>();\n  return (\n    <>\n      <PageHeader pageTitle=\"Bases\" />\n      <LinkButton variant=\"green\" to={`/base/create`} className=\"mb-7\">\n        Add Base\n      </LinkButton>\n      <table className=\"text-left table-auto w-full border-neutral-300 border-1 mt-7\">\n        <thead>\n          <tr className=\"border-b border-black\">\n            <th className=\"pl-3\">Name</th>\n            <th>Organizations</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          {bases.map((base) => (\n            <tr key={base.id} className=\"table-row border-b even:bg-zinc-50\">\n              <td className=\"py-4 pl-3\">{base.name}</td>\n              <td>{base.assignedOrganizations.length}</td>\n              <td className=\"text-right pr-5\">\n                <LinkButton variant=\"gray\" to={`/base/${base.uuid}/edit`}>\n                  Edit\n                </LinkButton>\n                <LinkButton\n                  variant=\"green\"\n                  className=\"ml-3\"\n                  to={`/base/${base.uuid}/add`}>\n                  Add Wing\n                </LinkButton>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <Outlet />\n    </>\n  );\n};\n\nexport const ErrorBoundary = ErrorReport;\nexport default BaseIndex;\n"],"names":["BaseIndex","bases","useLoaderData","jsxs","Fragment","children","jsx","PageHeader","pageTitle","LinkButton","variant","to","className","map","base","name","assignedOrganizations","length","uuid","id","Outlet","ErrorBoundary","ErrorReport"],"mappings":"03BAmBMA,MAAAA,EAAYA,IAAM,CAChB,KAAA,CAAEC,MAAAA,CAAM,EAAIC,EAA6B,EAC/C,OAEIC,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAA,CAACC,EAAA,IAAAC,EAAA,CAAWC,UAAU,OAAQ,CAAA,EAC9BF,EAAA,IAACG,GAAWC,QAAQ,QAAQC,GAAI,eAAgBC,UAAU,OAAOP,SAEjE,UAAA,CAAA,EACAF,EAAA,KAAC,QAAM,CAAAS,UAAU,+DACfP,SAAA,CAAAC,EAAA,IAAC,QACC,CAAAD,SAAAF,EAAA,KAAC,KAAG,CAAAS,UAAU,wBACZP,SAAA,CAACC,EAAA,IAAA,KAAA,CAAGM,UAAU,OAAOP,SAAI,MAAA,CAAA,EACzBC,EAAA,IAAC,MAAGD,SAAa,gBAAA,QAChB,KAAG,EAAA,CAAA,CACN,CAAA,CACF,CAAA,EACAC,EAAA,IAAC,SACED,SAAMJ,EAAAY,IAAKC,GACVX,EAAAA,KAAC,KAAiB,CAAAS,UAAU,qCAC1BP,SAAA,CAAAC,EAAA,IAAC,KAAG,CAAAM,UAAU,YAAaP,SAAAS,EAAKC,IAAK,CAAA,EACpCT,EAAA,IAAA,KAAA,CAAID,SAAKS,EAAAE,sBAAsBC,MAAO,CAAA,EACvCd,EAAA,KAAC,KAAG,CAAAS,UAAU,kBACZP,SAAA,CAACC,EAAA,IAAAG,EAAA,CAAWC,QAAQ,OAAOC,GAAI,SAASG,EAAKI,IAAI,QAASb,SAE1D,MAAA,CAAA,EACAC,EAAA,IAACG,EAAA,CACCC,QAAQ,QACRE,UAAU,OACVD,GAAI,SAASG,EAAKI,IAAI,OAAQb,SAAA,UAAA,CAEhC,CAAA,CACF,CAAA,CAAA,CAbO,EAAAS,EAAKK,EAcd,CACD,CACH,CAAA,CAAA,EACF,QACCC,EAAO,EAAA,CAAA,CACV,CAAA,CAEJ,EAEaC,EAAgBC"}