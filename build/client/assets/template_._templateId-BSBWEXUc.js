import{a as E,r as h,j as e,O as I}from"./index-CGKE_yqd.js";import{L as i,D}from"./Buttons-PCh2vdNK.js";import{E as z}from"./ErrorReport-DufojM8E.js";import{R as f}from"./RichTextViewer-B6kyuz0s.js";import"./index-CPe-BBEd.js";import{a as F}from"./useMatchesData-C6FIMaQn.js";import{u as P,a as R}from"./components-BktKjo96.js";import{F as $,a as T}from"./ChevronRightIcon-C_P991sd.js";import{F as _,a as C}from"./ChevronUpIcon-C1_-dFAd.js";import"./useGenerateSearchParams-DHzu1JTo.js";import"./node-B4O4sgZ3.js";import"./index-BIjbdFWj.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new a.Error().stack;r&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[r]="f363e789-6006-45c6-b65f-0f52af135450",a._sentryDebugIdIdentifier="sentry-dbid-f363e789-6006-45c6-b65f-0f52af135450")}catch{}})();const p=10;function W(){const{templateId:a}=E(),{template:r,inheritedItems:c,errors:M}=P(),u=R();F();const[o,g]=h.useState(!1),[t,x]=h.useState(1),d=Math.ceil((r==null?void 0:r.items.length)/p),j=(t-1)*p,N=j+p,m=r==null?void 0:r.items.slice(j,N);h.useEffect(()=>{m.length===0&&t>1&&x(t-1)},[m.length,t]);const w=()=>{x(t-1)},y=()=>{x(t+1)},v=()=>{g(!o)};return e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"my-5",variant:"gray",to:"/template",children:"Back"}),e.jsxs("div",{className:"flex border-b border-gray-200 pb-5 my-5 items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline",children:[e.jsx("h1",{className:"text-2xl font-bold",children:r.name}),e.jsx("p",{className:"ml-1.5 text-2xl font-bold",children:"Template"})]}),e.jsx("div",{className:"max-h-[10.75rem] overflow-y-auto",children:e.jsx(f,{children:r.description})})]}),e.jsxs("div",{children:[e.jsx(i,{className:"mx-3",variant:"green",to:"item/create",children:"Create New Item"}),e.jsx(i,{to:`/template/${a}/edit`,children:"Edit"})]})]}),e.jsx("section",{className:"",children:(r==null?void 0:r.items.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"text-left w-[1fr] rounded-t-lg shadow-lg border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-zinc-600 text-zinc-800 uppercase bg-zinc-100 dark:bg-zinc-700 dark:text-zinc-400",children:[e.jsx("th",{className:"w-72 px-6 py-3 rounded-tl-lg",children:"Name"}),e.jsx("th",{className:"py-3",children:"Description"}),e.jsx("th",{className:"text-center px-2",children:"Dorm"}),e.jsx("th",{className:"text-center px-2",children:"EFMP"}),e.jsx("th",{className:"text-center px-2",children:"Dependents"}),e.jsx("th",{}),e.jsx("th",{className:"rounded-tr-lg"})]})}),e.jsx("tbody",{children:m.map(s=>{var n;return e.jsxs("tr",{className:"table-row border-b even:bg-zinc-50",children:[e.jsx("td",{className:"py-4 px-6 align-middle line-clamp-2",children:e.jsx("div",{className:"flex items-center",children:e.jsx("p",{className:"line-clamp-2",children:s.reference?s.reference.name:s.name})})}),e.jsx("td",{className:"pr-5",children:e.jsx("div",{children:e.jsx(f,{className:"line-clamp-2 w-[35vw]",children:s.description===""?(n=s.reference)==null?void 0:n.description:s.description})})}),e.jsx("td",{className:"text-center border-x border-zinc-400",children:s.forDormResidents?"✔":"✖"}),e.jsx("td",{className:"text-center border-x border-zinc-400",children:s.forHasEFMP?"✔":"✖"}),e.jsx("td",{className:"text-center border-x border-zinc-400",children:s.forHasDependents?"✔":"✖"}),e.jsx("td",{className:"text-right pl-5",children:e.jsx(i,{to:`/template/${a}/item/${s.uuid}/edit`,variant:"gray",children:"Edit"})}),e.jsx("td",{className:"pr-5",children:!s.referenceId&&e.jsxs(u.Form,{method:"post",className:"inline ml-3",children:[e.jsx("input",{type:"hidden",name:"id",value:s.uuid}),e.jsx(D,{name:"_action",value:"delete",type:"submit",children:"Delete"})]})})]},s.id)})})]}),e.jsx("div",{className:"flex justify-center mt-5",children:e.jsx("nav",{"aria-label":"Pagination",children:e.jsxs("ul",{className:"flex space-x-2",children:[t>1&&e.jsx("li",{className:"flex",children:e.jsx("button",{onClick:w,disabled:t===1,className:`inline-flex items-center space-x-2 rounded-full border border-gray-300 bg-white p-3 font-medium text-black hover:bg-gray-50 ${t===1?"cursor-not-allowed":""}`,children:e.jsx($,{className:"stroke-black w-5 h-5"})})}),e.jsx("li",{children:e.jsxs("span",{className:"inline-flex items-center space-x-1 rounded-md bg-white px-4 py-2 text-black text-lg",children:["Page ",e.jsx("b",{className:"mx-1",children:t})," of"," ",e.jsx("b",{className:"ml-1",children:d})]})}),t<d&&e.jsx("li",{className:"flex",children:e.jsx("button",{onClick:y,disabled:t===d,className:`inline-flex items-center space-x-2 rounded-full border border-gray-300 bg-white p-3 font-medium text-black hover:bg-gray-50 ${t===d?"cursor-not-allowed":""}`,children:e.jsx(T,{className:"stroke-black w-5 h-5"})})})]})})})]}):"No items to view. Please use the Create button to add tasks."}),c&&c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-8 h-px border-0 bg-gray-300"}),e.jsxs("section",{className:"border mt-5 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between text-xl font-bold py-1 px-4 hover:cursor-pointer hover:bg-zinc-300 w-full bg-zinc-100 rounded shadow",onClick:v,children:[e.jsx("h1",{children:"Inherited Items"}),o?e.jsx(_,{className:"size-8"}):e.jsx(C,{className:"size-8"})]}),o&&e.jsx("ul",{children:c.map(({name:s,items:n,owningOrg:B},k)=>e.jsxs("li",{className:"mx-3 my-4 first:mt-0",children:[e.jsx("h3",{className:"text-lg font-bold py-3",children:s}),n.length>0?e.jsx("div",{className:"w-full border border-zinc-300 py-2 rounded-lg shadow-lg text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:n.map(l=>{var b;return e.jsxs("div",{className:"flex gap-4 items-center w-full justify-between pt-3 even:bg-slate-100 pl-5 border-b last:border-b-0 border-b-1",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-medium text-gray-900 whitespace-nowrap dark:text-white",children:l.reference?l.reference.name:l.name}),e.jsx("div",{className:"line-clamp-2 my-4 pr-4 w-full",children:e.jsx(f,{children:l.description===""?(b=l.reference)==null?void 0:b.description:l.description})})]}),e.jsx("div",{className:"pr-3 flex-none"})]},l.uuid)})}):"No items to inherit."]},`${s}-${k}`))})]})]}),e.jsx(I,{})]})}const X=z;export{X as ErrorBoundary,W as default};
//# sourceMappingURL=template_._templateId-BSBWEXUc.js.map
