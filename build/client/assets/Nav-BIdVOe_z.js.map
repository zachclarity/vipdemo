{"version":3,"file":"Nav-BIdVOe_z.js","sources":["../../../app/components/SideBar/SidebarLink.tsx","../../../app/components/SideBar/Nav.tsx"],"sourcesContent":["import useGenerateSearchParams from '@lib/hooks/useGenerateSearchParams';\nimport type { SideBarNavLink } from '@lib/types';\nimport {\n  Link,\n  useLocation,\n} from '@remix-run/react';\n\ntype SidebarLinkProps = {\n  links: SideBarNavLink['links'];\n  header: string;\n};\n\ntype IsActiveByPathFn = (path: string, pathToCompare: string) => boolean;\n\ntype IsActiveByStringFn = (\n  str: string | RegExp,\n  strToCompare: string,\n) => boolean;\n\nconst isPathEqual: IsActiveByPathFn = (href, pathToCompare) =>\n  pathToCompare.toLowerCase() === href;\n\nconst compareByRegex = (regex: RegExp, path: string) => !!path.match(regex);\n\nconst searchPath: IsActiveByStringFn = (urlPattern, path) => {\n  if (typeof urlPattern === 'string')\n    return path.toLowerCase().includes(urlPattern.toLowerCase());\n  else return compareByRegex(urlPattern, path);\n};\n\nexport default function SidebarLink({ links, header }: SidebarLinkProps) {\n  const location = useLocation();\n\n  let isActive: boolean;\n  const extraMenuListItemClasses = 'mt-4 mb-6';\n  const extraMenuListItemHeaderClasses = 'text-xl mb-2';\n  const extraNavLinkClass =\n    'flex items-center rounded p-2 px-4 hover:bg-slate-400';\n  const extraNavLinkActive = 'bg-gray-500 text-white';\n  const extraMenuIconClasses = 'h-6 w-6 mr-3';\n\n  const hasLinks = links.length > 0;\n\n  const searchParams = useGenerateSearchParams({keysToRemove: 'includeChildren'});\n\n  return (\n    hasLinks && (\n      <li className={extraMenuListItemClasses}>\n        <h3 className={extraMenuListItemHeaderClasses}>{header}</h3>\n        <ul>\n          {links.map((link, linkIndex) => {\n            if (link.urlPattern) {\n              isActive = searchPath(link.urlPattern, location.pathname);\n            } else {\n              isActive = isPathEqual(link.href, location.pathname);\n            }\n            return (\n              <li\n                key={`${link.text}-${linkIndex}`}\n                className={link.extraClasses ?? ''}>\n                <Link\n                  prefetch=\"intent\"\n                  to={ { pathname: link.href, search: searchParams }}\n                  className={`${extraNavLinkClass}${\n                    isActive ? ` ${extraNavLinkActive}` : ''\n                  } `}>\n                  {link.icon && <link.icon className={extraMenuIconClasses} />}\n                  {link.text}\n                </Link>\n              </li>\n            );\n          })}\n        </ul>\n      </li>\n    )\n  );\n}\n","import { useRootLayoutData } from '@lib/hooks/useMatchesData';\nimport usePermissions from '@lib/hooks/usePermissions';\nimport type { SideBarNavLink } from '@lib/types';\nimport SidebarLink from './SidebarLink';\n\nexport type SideBarProps = {\n  navLinks: SideBarNavLink[];\n};\n\nexport default function SideBarNav({ navLinks }: SideBarProps) {\n  const permissions = useRootLayoutData('permissions');\n  const checkPermissions = usePermissions();\n\n  const actualLinks = new Map<string, SideBarNavLink['links']>();\n\n  for (const navLink of navLinks) {\n    let links: any[] = [];\n    navLink.links.forEach((link) => {\n      if (\n        link.permission &&\n        checkPermissions(permissions, link.permission)\n      )\n        links.push({ ...link });\n      else if (!link.permission) links.push({ ...link });\n    });\n\n    let key = navLink.header;\n    if (navLink.header === '') key = '';\n\n    if (links.length > 0) actualLinks.set(key, links);\n  }\n\n  return (\n    <div\n      id=\"extraMenu\"\n      className=\"w-[300px] h-screen top-0 sticky overflow-scroll no-scrollbar flex-shrink-0 bg-gray-200 py-8 pt-2 px-4\">\n      <ul>\n        {Array.from(actualLinks).map(\n          ([header, links], index) =>\n            links.length > 0 && (\n              <SidebarLink\n                key={`${header}-${index}`}\n                links={links}\n                header={header}/>\n            )\n        )}\n      </ul>\n    </div>\n  );\n}\n"],"names":["isPathEqual","href","pathToCompare","compareByRegex","regex","path","searchPath","urlPattern","SidebarLink","links","header","location","useLocation","isActive","extraMenuListItemClasses","extraMenuListItemHeaderClasses","extraNavLinkClass","extraNavLinkActive","extraMenuIconClasses","hasLinks","searchParams","useGenerateSearchParams","jsxs","jsx","link","linkIndex","Link","SideBarNav","navLinks","permissions","useRootLayoutData","checkPermissions","usePermissions","actualLinks","navLink","key","index"],"mappings":"6kBAmBA,MAAMA,EAAgC,CAACC,EAAMC,IAC3CA,EAAc,YAAkB,IAAAD,EAE5BE,EAAiB,CAACC,EAAeC,IAAiB,CAAC,CAACA,EAAK,MAAMD,CAAK,EAEpEE,EAAiC,CAACC,EAAYF,IAC9C,OAAOE,GAAe,SACjBF,EAAK,YAAY,EAAE,SAASE,EAAW,aAAa,EACjDJ,EAAeI,EAAYF,CAAI,EAG7C,SAAwBG,EAAY,CAAE,MAAAC,EAAO,OAAAC,GAA4B,CACvE,MAAMC,EAAWC,EAAY,EAEzB,IAAAC,EACJ,MAAMC,EAA2B,YAC3BC,EAAiC,eACjCC,EACJ,wDACIC,EAAqB,yBACrBC,EAAuB,eAEvBC,EAAWV,EAAM,OAAS,EAE1BW,EAAeC,EAAwB,CAAC,aAAc,kBAAkB,EAE9E,OACEF,GACEG,EAAAA,KAAC,KAAG,CAAA,UAAWR,EACb,SAAA,CAACS,EAAA,IAAA,KAAA,CAAG,UAAWR,EAAiC,SAAOL,EAAA,QACtD,KACE,CAAA,SAAAD,EAAM,IAAI,CAACe,EAAMC,KACZD,EAAK,WACPX,EAAWP,EAAWkB,EAAK,WAAYb,EAAS,QAAQ,EAExDE,EAAWb,EAAYwB,EAAK,KAAMb,EAAS,QAAQ,EAGnDY,EAAA,IAAC,KAAA,CAEC,UAAWC,EAAK,cAAgB,GAChC,SAAAF,EAAA,KAACI,EAAA,CACC,SAAS,SACT,GAAK,CAAE,SAAUF,EAAK,KAAM,OAAQJ,CAAa,EACjD,UAAW,GAAGJ,CAAiB,GAC7BH,EAAW,IAAII,CAAkB,GAAK,EACxC,IACC,SAAA,CAAAO,EAAK,MAASD,MAAAC,EAAK,KAAL,CAAU,UAAWN,EAAsB,EACzDM,EAAK,IAAA,CAAA,CAAA,CACR,EAVK,GAAGA,EAAK,IAAI,IAAIC,CAAS,EAWhC,EAEH,CACH,CAAA,CAAA,EACF,CAGN,CCnEwB,SAAAE,EAAW,CAAE,SAAAC,GAA0B,CACvD,MAAAC,EAAcC,EAAkB,aAAa,EAC7CC,EAAmBC,EAAe,EAElCC,MAAkB,IAExB,UAAWC,KAAWN,EAAU,CAC9B,IAAInB,EAAe,CAAC,EACZyB,EAAA,MAAM,QAASV,GAAS,CAE5BA,EAAK,YACLO,EAAiBF,EAAaL,EAAK,UAAU,EAE7Cf,EAAM,KAAK,CAAE,GAAGe,EAAM,EACdA,EAAK,YAAYf,EAAM,KAAK,CAAE,GAAGe,EAAM,CAAA,CAClD,EAED,IAAIW,EAAMD,EAAQ,OACdA,EAAQ,SAAW,KAAUC,EAAA,IAE7B1B,EAAM,OAAS,GAAewB,EAAA,IAAIE,EAAK1B,CAAK,CAAA,CAIhD,OAAAc,EAAA,IAAC,MAAA,CACC,GAAG,YACH,UAAU,wGACV,SAACA,EAAAA,IAAA,KAAA,CACE,SAAM,MAAA,KAAKU,CAAW,EAAE,IACvB,CAAC,CAACvB,EAAQD,CAAK,EAAG2B,IAChB3B,EAAM,OAAS,GACbc,EAAA,IAACf,EAAA,CAEC,MAAAC,EACA,OAAAC,CAAA,EAFK,GAAGA,CAAM,IAAI0B,CAAK,EAAA,CAER,CAGzB,CAAA,CAAA,CACF,CAEJ"}