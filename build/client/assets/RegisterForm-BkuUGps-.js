import{r as t,j as e}from"./index-CGKE_yqd.js";import{O as Q}from"./OrgCombobox-DObGaZmv.js";import"./index-CPe-BBEd.js";import{U as V}from"./constants-DpBRbtn9.js";import{i as k}from"./index-browser-BzJTmVxG.js";import{B as g,A as Z}from"./Buttons-PCh2vdNK.js";import{I as y}from"./Input-qJnTyjxU.js";import{a as G}from"./components-BktKjo96.js";import{z as Y}from"./transition-DpAM4Mvv.js";import{F as J}from"./ChevronRightIcon-CUzTU7jI.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},l=new o.Error().stack;l&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[l]="53a49388-73e0-4a15-89d6-c591cce4d3bf",o._sentryDebugIdIdentifier="sentry-dbid-53a49388-73e0-4a15-89d6-c591cce4d3bf")}catch{}})();function X({title:o,titleId:l,...j},m){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":l},j),o?t.createElement("title",{id:l},o):null,t.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))}const ee=t.forwardRef(X),he=({orgs:o,allRequired:l=!0,btnAction:j="create",registerOrCreate:m="register",currentOrg:f,orgFlatArray:N,orgParentNode:W})=>{var q,L;const x=["userAccount","details","questionnaire","confirmation"],[n,E]=t.useState(x[0]),[ae,$]=t.useState(!1),_={name:"",rank:k.Rank.CIV,dodId:"0000000000",org:(f==null?void 0:f.uuid)??N[0].uuid,password:"",confirmPassword:"",personalPhone:"",workPhone:"",workEmail:"",hasDependents:!1,isDormResident:!1,sponsorReach:!1,hasEFMP:!1,personalEmail:"",emailDomain:"us.af.mil"},B=(a,r)=>{switch(r.type){case"changeText":return{...a,[r.field]:r.value};case"changeRadio":return{...a,[r.field]:r.value};default:return{...a,etc:r.value}}},[s,R]=t.useReducer(B,_),[D,M]=t.useState(!1),[w,U]=t.useState(!1),z=t.useCallback(()=>{const a=s.dodId;return/^[0-9]{10}$/.test(a)},[s.dodId]),p=t.useCallback(()=>{console.log("checking password");const a=s.password,r=!/\s/.test(a),u=a.length>=10;return r&&u},[s.password]),v=t.useCallback(()=>{const a=s.confirmPassword;return a!==""&&a===s.password&&p()},[p,s.confirmPassword,s.password]),C=t.useCallback(()=>{const r=s.name.trim().split(" ");return s.name=r.map(u=>u.charAt(0).toUpperCase()+u.slice(1).toLocaleLowerCase()).join(" "),r.length>=2&&r.every(u=>u!=="")},[s]),P=t.useCallback(()=>{s.workEmail=s.workEmail.trim().toLocaleLowerCase();const a=s.workEmail;return a===""||a.length>254?!1:!a.includes("@")},[s]),d=t.useCallback(()=>(console.log("checking form"),s.org!==""&&s.workEmail!==""&&s.password!==""&&s.confirmPassword!==""&&s.name!==""&&C()&&P()&&z()&&p()&&v()),[v,z,C,p,P,s.confirmPassword,s.name,s.org,s.password,s.workEmail]),F=t.useRef(null),A=t.useRef(null),T=t.useRef(null),O=t.useRef(null);t.useEffect(()=>{switch(n){case"userAccount":F.current&&F.current.focus();break;case"details":A.current&&A.current.focus();break;case"questionnaire":T.current&&T.current.focus();break}},[n]);const b=a=>{typeof a=="number"?a>=0&&a<x.length&&E(()=>x[a]):typeof a=="string"&&E(a)},I=()=>{if(d()){const a=x.indexOf(n);b(a+1)}D&&M(!0)},H=()=>{const a=x.indexOf(n);b(a-1)},c=a=>{if(a.currentTarget.name&&a.currentTarget.value!==void 0){const r=a.currentTarget.name==="workEmail"?a.currentTarget.value.toLocaleLowerCase():a.currentTarget.value;R({type:"changeText",field:a.currentTarget.name,value:r}),a.currentTarget.name==="confirmPassword"&&$(!0)}},i=(a,r)=>{R({type:"changeRadio",field:a,value:r})};function K(a){a.key==="Enter"&&(n==="confirmation"?S():I())}const S=()=>{d()&&h.submit({...s},{method:"POST"})},h=G();return e.jsxs(e.Fragment,{children:[((q=h.data)==null?void 0:q.status)==="error"&&e.jsx("div",{className:"bg-red-700/80 rounded-lg my-5 py-2 text-slate-100 font-bold text-lg text-center",children:Array.isArray(h.data.error)?h.data.error.map(a=>a.message):h.data.error.message}),e.jsxs("ol",{className:"mt-5 flex items-center w-full text-sm font-medium text-center text-black mb-5",children:[e.jsx("li",{className:"flex md:w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-200 after:border-1 after:hidden sm:after:inline-block after:mx-6 xl:after:mx-10 dark:after:border-gray-700",children:e.jsx("span",{className:"flex items-center after:content-['/'] sm:after:hidden after:mx-2 after:text-gray-200 dark:after:text-gray-500",children:e.jsx(g,{onClick:()=>b("userAccount"),name:"userAccount",className:`${n==="userAccount"?" bg-zinc-700 text-white":""} whitespace-nowrap`,children:"Account Information"})})}),e.jsx("li",{className:"flex md:w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-200 after:border-1 after:hidden sm:after:inline-block after:mx-6 xl:after:mx-10 dark:after:border-gray-700"}),e.jsx("li",{className:"flex md:w-full items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-200 after:border-1 after:hidden sm:after:inline-block after:mx-6 xl:after:mx-10 dark:after:border-gray-700",children:e.jsx("span",{className:"flex items-center after:content-['/'] sm:after:hidden after:mx-2 after:text-gray-200 dark:after:text-gray-500",children:e.jsx(g,{disabled:!d(),onClick:()=>b("questionnaire"),name:"questionnaire",className:`whitespace-nowrap ${n==="questionnaire"?" bg-zinc-700 text-white":""} ${d()?"":"cursor-not-allowed disabled"}`,children:"Questionnaire"})})}),e.jsx("li",{className:"flex items-center",children:e.jsx(g,{disabled:!d(),onClick:()=>b("confirmation"),className:`whitespace-nowrap ${n==="confirmation"?" bg-zinc-700 text-white":""} ${d()?"":"cursor-not-allowed disabled"}`,children:"Confirmation"})})]}),e.jsxs(h.Form,{method:"post",className:"flex flex-col lg:h-[600px] pt-5",id:"registerForm",onKeyUp:K,children:[n==="userAccount"&&e.jsxs("div",{className:"grid mx-auto w-3/5 px-10 py-5 rounded-lg border border-1 shadow-lg",children:[e.jsx("h2",{className:"text-xl text-center font-bold mt-5 mb-5",children:"Account Infomation"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-black",children:"Select Rank"}),e.jsx("select",{name:"rank",ref:F,defaultValue:s.rank,onChange:c,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50",children:Object.entries(V).map((a,r)=>e.jsx("option",{value:a[0],children:a[1].name},r))})]}),e.jsx("div",{className:"mb-2",children:e.jsx(y.TextWithValidation,{label:"Full Name",type:"text",validationFn:C,validationMsg:"Please enter a valid First and Last name",name:"name",value:s.name,onChange:c,required:!0})}),e.jsxs("div",{className:"mb-2",children:[e.jsx(y.TextInlineSelectWithValidation,{label:"Official Email Address",validationFn:P,validationMsg:"Please enter the beginning of your email address (first_name.last_name).",onSelectChange:c,name:"workEmail",value:s.workEmail,onChange:c,required:!0}),e.jsxs("p",{className:"text-sm mt-2",children:["If your domain is missing please let us know"," ",e.jsx("a",{href:"https://travisspark.atlassian.net/servicedesk/customer/portal/4/group/8/create/10032",target:"_blank",className:"underline",rel:"noreferrer",children:"here"}),"."]})]}),!f&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4 h-px border-0 bg-gray-300"}),e.jsx("div",{className:"mb-2",children:e.jsx(Q,{name:"org",parentNode:W,selected:N.find(a=>a.uuid===s.org)??N[0],orgArray:N,onChange:c,isCreateAccountPage:!0,label:"Select Organization:"})})]}),e.jsx("hr",{className:"my-4 h-px border-0 bg-gray-300"}),e.jsx("div",{className:"mb-2",children:e.jsx(y.TextWithValidation,{label:"Password",type:"password",validationFn:p,validationMsg:"The password needs a minimum of 10 characters.",name:"password",value:s.password,onChange:c,required:!0})}),e.jsx("div",{className:"mb-2",children:e.jsx(y.TextWithValidation,{label:"Confirm Password",type:"password",validationFn:v,validationMsg:"The passwords must match.",name:"confirmPassword",value:s.confirmPassword,onChange:c,required:!0})})]}),n==="details"&&e.jsxs("div",{className:"grid mx-auto w-3/5 px-10 py-5 rounded-lg border border-1 shadow-lg",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{htmlFor:"phone",className:"block mb-1 text-sm font-medium text-gray-900 dark:text-black",children:["Work Phone number (Optional)",e.jsx("span",{className:"text-xs"})]}),e.jsx("input",{type:"tel",id:"workPhone",name:"workPhone",className:"placeholder:text-black bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5",onChange:c,value:s.workPhone,pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:l})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"bio",className:"block mb-1 text-sm font-medium text-gray-900 dark:text-black",children:"Biography (Optional)"}),e.jsx("textarea",{id:"bio",name:"bio",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5"})]})]}),n==="questionnaire"&&e.jsxs("div",{className:"grid mx-auto w-3/5 px-10 py-5 rounded-lg border border-1 shadow-lg",children:[e.jsx("h2",{className:"text-xl text-center font-bold mt-5 mb-5",children:"Questionnaire"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h1",{children:"Are you currently a dorm resident?"}),e.jsx("input",{type:"radio",ref:T,id:"dormResidentYes",name:"isDormResident",defaultChecked:s.isDormResident,onChange:a=>i(a.currentTarget.name,!0),required:l}),e.jsx("label",{className:"ml-1",htmlFor:"dormResidentYes",children:"Yes"}),e.jsx("input",{className:"ml-3",type:"radio",id:"dormResidentNo",name:"isDormResident",defaultChecked:!s.isDormResident,onChange:a=>i(a.currentTarget.name,!1),required:l}),e.jsx("label",{className:"ml-1",htmlFor:"dormResidentNo",children:"No"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h1",{children:"Do you currently have any dependents?"}),e.jsx("input",{type:"radio",id:"hasDependentsYes",name:"hasDependents",defaultChecked:s.hasDependents,onChange:a=>i(a.currentTarget.name,!0),required:l}),e.jsx("label",{className:"ml-1",htmlFor:"hasDependentsYes",children:"Yes"}),e.jsx("input",{className:"ml-3",type:"radio",id:"hasDependentsNo",name:"hasDependents",defaultChecked:!s.hasDependents,onChange:a=>i(a.currentTarget.name,!1),required:l}),e.jsx("label",{className:"ml-1",htmlFor:"hasDependentsNo",children:"No"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h1",{children:"Is any member of your family enrolled in the Exceptional Family Member Program (EFMP)?*"}),e.jsx("div",{className:"text-xs mb-1",children:e.jsx("p",{children:"*Service members on active duty enroll in the program if they have a Family member with a physical, emotional, developmental, or intellectual disorder requiring specialized services so their needs can be considered in the military personnel assignment process."})}),e.jsx("input",{type:"radio",id:"hasEFMPYes",name:"hasEFMP",defaultChecked:s.hasEFMP,onChange:a=>i(a.currentTarget.name,!0)}),e.jsx("label",{className:"ml-1",htmlFor:"hasEFMPYes",children:"Yes"}),e.jsx("input",{className:"ml-3",type:"radio",id:"hasEFMPNo",name:"hasEFMP",defaultChecked:!s.hasEFMP,onChange:a=>i(a.currentTarget.name,!1)}),e.jsx("label",{className:"ml-1",htmlFor:"hasEFMPNo",children:"No"})]}),e.jsx("div",{})]}),n==="confirmation"&&e.jsxs("div",{className:"container grid grid-cols-3",children:[e.jsx("div",{className:"col-start-2 text-xl text-center font-bold mt-5 mb-5",children:e.jsx("h2",{children:m==="create"?"Confirm Information":"Confirm Your Information"})}),e.jsx("div",{className:"col-start-2 rounded-lg border border-neutral mx-auto w-[510px]",children:e.jsx("table",{className:"table w-full ",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b even:bg-zinc-100",children:[e.jsx("td",{className:"pl-2 py-2",children:"Rank:"}),e.jsx("td",{className:"font-bold py-2 pr-2",children:V[s.rank].name})]}),e.jsxs("tr",{className:"border-b even:bg-zinc-100",children:[e.jsx("td",{className:"pl-2 py-2",children:"Name:"}),e.jsx("td",{className:"font-bold py-2 pr-2",children:s.name})]}),!f&&e.jsxs("tr",{className:"border-b even:bg-zinc-100",children:[e.jsx("td",{className:"pl-2 py-2",children:"Organization:"}),e.jsx("td",{className:"font-bold py-2 pr-2",children:(L=o.filter(a=>a.uuid===s.org)[0])==null?void 0:L.name})]}),e.jsxs("tr",{className:"border-b even:bg-zinc-100",children:[e.jsx("td",{className:"pl-2 py-2",children:"Official Email:"}),e.jsxs("td",{className:"font-bold py-2 pr-2",children:[s.workEmail,"@",s.emailDomain]})]}),s.workPhone&&e.jsxs("tr",{className:"border-b even:bg-zinc-100",children:[e.jsx("td",{className:"pl-2 py-2",children:"Work Phone:"}),e.jsx("td",{className:"font-bold py-2 pr-2",children:s.workPhone})]}),e.jsxs("tr",{className:"border-b even:bg-zinc-100",children:[e.jsxs("td",{className:"pl-2 py-2",children:["Are ",m==="create"?"they":"you"," ","currently a dorm resident?"]}),e.jsx("td",{className:"font-bold py-2 pr-2",children:s.isDormResident?"Yes":"No"})]}),e.jsxs("tr",{className:"border-b even:bg-zinc-100",children:[e.jsxs("td",{className:"pl-2 py-2",children:["Do ",m==="create"?"they":"you"," ","currently have any dependents?"]}),e.jsx("td",{className:"font-bold py-2 pr-2",children:s.hasDependents?"Yes":"No"})]}),e.jsxs("tr",{className:"border-b even:bg-zinc-100",children:[e.jsxs("td",{className:"pl-2 py-2",children:["Do ",m==="create"?"they":"you"," ","qualify for EFMP?"]}),e.jsx("td",{className:"font-bold py-2 pr-2",children:s.hasEFMP?"Yes":"No"})]})]})})}),e.jsx(Y,{show:m==="create",children:e.jsxs("div",{className:"col-start-2 my-5 justify-self-center",children:[e.jsx(y.Checkbox,{name:"assignChecklist",onChange:a=>{U(r=>(i("moveType",r?void 0:k.MoveType.PCS),!r)),console.log(a.target.checked),i(a.target.name,a.target.checked)},defaultChecked:w,variant:"textLg",label:`Would you like to assign a checklist to ${s.name}?`}),e.jsxs(Y,{show:w,as:"div",enter:"transition duration-200",enterFrom:"opacity-0 -translate-y-10",enterTo:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-10",leave:"transition duration-200",children:[e.jsx("p",{className:"mb-2 text-base text-center text-zinc-600",children:"What type of checklist would you like to assign?"}),e.jsxs("div",{className:"flex gap-10 justify-center",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"moveType",value:"PCS",required:w,onChange:a=>i("moveType",k.MoveType.PCS),defaultChecked:!0,id:"pcsMoveType",className:"border sr-only peer border-zinc-400 rounded px-6"}),e.jsx("span",{className:"border hover:bg-blue-200 hover:cursor-pointer peer-checked:text-white border-zinc-400 rounded-lg px-6 py-1 text-sm peer select-none peer-checked:bg-blue-500 peer-checked:font-bold font-medium text-gray-900 dark:text-gray-300",children:"PCS"})]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"moveType",value:"PCA",required:w,onChange:a=>i("moveType",k.MoveType.PCA),id:"pcaMoveType",className:"border sr-only peer border-zinc-400 rounded px-6"}),e.jsx("span",{className:"border hover:bg-blue-200 hover:cursor-pointer peer-checked:text-white border-zinc-400 rounded-lg px-6 py-1 text-sm peer select-none peer-checked:bg-blue-500 peer-checked:font-bold font-medium text-gray-900 dark:text-gray-300",children:"PCA"})]})]})]})]})}),e.jsx("div",{className:"col-start-2 mt-20",children:e.jsx(Z,{className:"bg-green-400 w-full",ref:O,name:"_action",value:j,type:"button",onClick:S,children:"Submit"})})]})]}),e.jsxs("div",{className:"flex justify-between w-full mt-20",children:[e.jsx("div",{children:e.jsxs(g,{onClick:H,disabled:n==="userAccount",className:"inline-flex items-center",name:"previous",type:"button",children:[e.jsx(ee,{className:"h-5 w-5"})," Previous"]})}),e.jsx("div",{children:e.jsxs(g,{onClick:()=>{M(!0),I()},disabled:!d()||n==="confirmation",className:`inline-flex items-center ${d()&&!D?"":"bg-blue-500"}`,name:"next",type:"button",children:["Next ",e.jsx(J,{className:"h-5 w-5"})]})})]})]})};export{he as R};
//# sourceMappingURL=RegisterForm-BkuUGps-.js.map
