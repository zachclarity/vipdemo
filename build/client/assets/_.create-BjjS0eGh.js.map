{"version":3,"file":"_.create-BjjS0eGh.js","sources":["../../../app/routes/_withNav+/_withSideBar+/_manage+/user+/_.create.tsx"],"sourcesContent":["import ErrorReport from '@components/ui/ErrorReport';\nimport RegisterForm from '@components/ui/forms/RegisterForm';\nimport PageHeader from '@components/ui/PageHeader';\nimport type { ManageLayoutOutletContext } from '@lib/types';\nimport { Attribute } from '@lib/utils';\nimport type { ActionFunctionArgs } from '@remix-run/node';\nimport { json } from '@remix-run/node';\nimport {\n  useLoaderData,\n  useOutletContext,\n} from '@remix-run/react';\nimport { getOrgs, registerUserActionFn } from '@routes/_auth+/register.queries.server';\nimport { getOrgBeingViewed } from '@routes/_withNav+/_withSideBar+/_manage+/.server/org.queries';\nimport { requireUserAsObject } from '@services/user.server';\n\nexport const loader = async () => {\n  const orgs = await getOrgs();\n  return json({ orgs }, {\n    headers: {\n      'X-Frame-Options': 'SAMEORIGIN',\n    },\n  });\n};\n\nexport async function action({ request, params }: ActionFunctionArgs) {\n  const { id: loggedInUser, currentOrg } = await requireUserAsObject(request, {\n    permissions: Attribute.MEMBERS_READWRITE,\n    options: { redirectOnFailure: false },\n  });\n  const { orgBeingViewed } = await getOrgBeingViewed({defaultOrgId: currentOrg.uuid, searchParams: new URL(request.url).searchParams, params });\n  const response = await registerUserActionFn(request, '/user', loggedInUser, orgBeingViewed.uuid);\n  return json(response, {\n    headers: {\n      'X-Frame-Options': 'SAMEORIGIN',\n    },\n  });\n}\n\nconst AccountRegister = () => {\n  const { orgs } = useLoaderData<typeof loader>();\n  const { orgBeingViewed } = useOutletContext<ManageLayoutOutletContext>();\n\n  return (\n    <>\n      <PageHeader org={orgBeingViewed} pageTitle=\"Create User Account\" />\n      <section className=\"container mx-auto h-full px-5\">\n        <RegisterForm orgs={orgs} currentOrg={orgBeingViewed} btnAction=\"create\" registerOrCreate=\"create\" />\n      </section>\n    </>\n  );\n};\n\nexport const ErrorBoundary = ErrorReport;\nexport default AccountRegister;\n"],"names":["AccountRegister","orgs","useLoaderData","orgBeingViewed","useOutletContext","jsxs","Fragment","children","jsx","PageHeader","org","pageTitle","className","RegisterForm","currentOrg","btnAction","registerOrCreate","ErrorBoundary","ErrorReport"],"mappings":"imCAsCMA,MAAAA,EAAkBA,IAAM,CACtB,KAAA,CAAEC,KAAAA,CAAK,EAAIC,EAA6B,EACxC,CAAEC,eAAAA,CAAe,EAAIC,EAA4C,EAEvE,OAEIC,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAA,CAAAC,EAAA,IAACC,EAAW,CAAAC,IAAKP,EAAgBQ,UAAU,qBAAsB,CAAA,EAChEH,EAAA,IAAA,UAAA,CAAQI,UAAU,gCACjBL,SAACC,EAAA,IAAAK,EAAA,CAAaZ,KAAAA,EAAYa,WAAYX,EAAgBY,UAAU,SAASC,iBAAiB,QAAS,CAAA,CACrG,CAAA,CAAA,CACF,CAAA,CAEJ,EAEaC,EAAgBC"}