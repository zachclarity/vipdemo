import{r,R as f}from"./index-CGKE_yqd.js";import{n as x,O as ve,K as G,y as J,A as F,l as ee,o as R,x as he,m as me,t as pe,R as be,i as S,L as ne,c as ge,u as re,s as we,p as Ee,a as te}from"./portal-5Px_MhHe.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b09a57e3-29e3-48ac-88af-dc4d666881e6",e._sentryDebugIdIdentifier="sentry-dbid-b09a57e3-29e3-48ac-88af-dc4d666881e6")}catch{}})();function Re(){let e=r.useRef(!1);return x(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function le(e){var n;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((n=e.as)!=null?n:ue)!==r.Fragment||f.Children.count(e.children)===1}let M=r.createContext(null);M.displayName="TransitionContext";var Te=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Te||{});function Ce(){let e=r.useContext(M);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function ye(){let e=r.useContext(U);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let U=r.createContext(null);U.displayName="NestingContext";function j(e){return"children"in e?j(e.children):e.current.filter(({el:n})=>n.current!==null).filter(({state:n})=>n==="visible").length>0}function ie(e,n){let l=we(e),a=r.useRef([]),T=Re(),P=Ee(),v=R((u,t=F.Hidden)=>{let s=a.current.findIndex(({el:i})=>i===u);s!==-1&&(te(t,{[F.Unmount](){a.current.splice(s,1)},[F.Hidden](){a.current[s].state="hidden"}}),P.microTask(()=>{var i;!j(a)&&T.current&&((i=l.current)==null||i.call(l))}))}),C=R(u=>{let t=a.current.find(({el:s})=>s===u);return t?t.state!=="visible"&&(t.state="visible"):a.current.push({el:u,state:"visible"}),()=>v(u,F.Unmount)}),p=r.useRef([]),d=r.useRef(Promise.resolve()),h=r.useRef({enter:[],leave:[]}),b=R((u,t,s)=>{p.current.splice(0),n&&(n.chains.current[t]=n.chains.current[t].filter(([i])=>i!==u)),n==null||n.chains.current[t].push([u,new Promise(i=>{p.current.push(i)})]),n==null||n.chains.current[t].push([u,new Promise(i=>{Promise.all(h.current[t].map(([y,H])=>H)).then(()=>i())})]),t==="enter"?d.current=d.current.then(()=>n==null?void 0:n.wait.current).then(()=>s(t)):s(t)}),g=R((u,t,s)=>{Promise.all(h.current[t].splice(0).map(([i,y])=>y)).then(()=>{var i;(i=p.current.shift())==null||i()}).then(()=>s(t))});return r.useMemo(()=>({children:a,register:C,unregister:v,onStart:b,onStop:g,wait:d,chains:h}),[C,v,a,b,g,h,d])}let ue=r.Fragment,se=ve.RenderStrategy;function $e(e,n){var l,a;let{transition:T=!0,beforeEnter:P,afterEnter:v,beforeLeave:C,afterLeave:p,enter:d,enterFrom:h,enterTo:b,entered:g,leave:u,leaveFrom:t,leaveTo:s,...i}=e,[y,H]=r.useState(null),o=r.useRef(null),w=le(e),$=J(...w?[o,n,H]:n===null?[]:[n]),Q=(l=i.unmount)==null||l?F.Unmount:F.Hidden,{show:m,appear:V,initial:W}=Ce(),[E,z]=r.useState(m?"visible":"hidden"),X=ye(),{register:L,unregister:O}=X;x(()=>L(o),[L,o]),x(()=>{if(Q===F.Hidden&&o.current){if(m&&E!=="visible"){z("visible");return}return te(E,{hidden:()=>O(o),visible:()=>L(o)})}},[E,o,L,O,m,Q]);let _=ee();x(()=>{if(w&&_&&E==="visible"&&o.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[o,E,_,w]);let oe=W&&!V,Y=V&&m&&W,k=r.useRef(!1),A=ie(()=>{k.current||(z("hidden"),O(o))},X),Z=R(K=>{k.current=!0;let N=K?"enter":"leave";A.onStart(o,N,D=>{D==="enter"?P==null||P():D==="leave"&&(C==null||C())})}),q=R(K=>{let N=K?"enter":"leave";k.current=!1,A.onStop(o,N,D=>{D==="enter"?v==null||v():D==="leave"&&(p==null||p())}),N==="leave"&&!j(A)&&(z("hidden"),O(o))});r.useEffect(()=>{w&&T||(Z(m),q(m))},[m,w,T]);let ce=!(!T||!w||!_||oe),[,c]=he(ce,y,m,{start:Z,end:q}),de=me({ref:$,className:((a=pe(i.className,Y&&d,Y&&h,c.enter&&d,c.enter&&c.closed&&h,c.enter&&!c.closed&&b,c.leave&&u,c.leave&&!c.closed&&t,c.leave&&c.closed&&s,!c.transition&&m&&g))==null?void 0:a.trim())||void 0,...be(c)}),I=0;E==="visible"&&(I|=S.Open),E==="hidden"&&(I|=S.Closed),c.enter&&(I|=S.Opening),c.leave&&(I|=S.Closing);let fe=ne();return f.createElement(U.Provider,{value:A},f.createElement(ge,{value:I},fe({ourProps:de,theirProps:i,defaultTag:ue,features:se,visible:E==="visible",name:"Transition.Child"})))}function Fe(e,n){let{show:l,appear:a=!1,unmount:T=!0,...P}=e,v=r.useRef(null),C=le(e),p=J(...C?[v,n]:n===null?[]:[n]);ee();let d=re();if(l===void 0&&d!==null&&(l=(d&S.Open)===S.Open),l===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,b]=r.useState(l?"visible":"hidden"),g=ie(()=>{l||b("hidden")}),[u,t]=r.useState(!0),s=r.useRef([l]);x(()=>{u!==!1&&s.current[s.current.length-1]!==l&&(s.current.push(l),t(!1))},[s,l]);let i=r.useMemo(()=>({show:l,appear:a,initial:u}),[l,a,u]);x(()=>{l?b("visible"):!j(g)&&v.current!==null&&b("hidden")},[l,g]);let y={unmount:T},H=R(()=>{var $;u&&t(!1),($=e.beforeEnter)==null||$.call(e)}),o=R(()=>{var $;u&&t(!1),($=e.beforeLeave)==null||$.call(e)}),w=ne();return f.createElement(U.Provider,{value:g},f.createElement(M.Provider,{value:i},w({ourProps:{...y,as:r.Fragment,children:f.createElement(ae,{ref:p,...y,...P,beforeEnter:H,beforeLeave:o})},theirProps:{},defaultTag:r.Fragment,features:se,visible:h==="visible",name:"Transition"})))}function Pe(e,n){let l=r.useContext(M)!==null,a=re()!==null;return f.createElement(f.Fragment,null,!l&&a?f.createElement(B,{ref:n,...e}):f.createElement(ae,{ref:n,...e}))}let B=G(Fe),ae=G($e),Se=G(Pe),Ie=Object.assign(B,{Child:Se,Root:B});export{Se as F,Re as f,Ie as z};
//# sourceMappingURL=transition-DpAM4Mvv.js.map
