{"version":3,"file":"Table-DHblAk8H.js","sources":["../../../app/components/ui/table/Table.tsx"],"sourcesContent":["import type { TailwindTextAlignType, TailwindWidthType } from '@lib/types';\nimport type { PropsWithChildren, ReactNode } from 'react';\nimport { createContext, forwardRef, useContext } from 'react';\n\nconst TableContext = createContext<{\n  cells: TableItem[];\n}>({ cells: [] });\n\ntype TableFnProps = React.TableHTMLAttributes<HTMLTableElement> & {\n  cells: TableItem[];\n};\n\nexport type TableItem = {\n  header: string;\n  key: string;\n  width?: TailwindWidthType;\n  textAlign?: TailwindTextAlignType;\n  render?: (\n    item: string,\n    obj: TableRowFnProps['item'],\n  ) => ReactNode | ((item: string) => ReactNode);\n};\n\nfunction TableFn(\n  props: TableFnProps,\n  ref: React.ForwardedRef<HTMLTableElement>\n) {\n  const classes = `text-left table-auto w-full border-neutral-300 border-1${' ' + props.className}`;\n  return (\n    <TableContext.Provider value={{ cells: props.cells }}>\n      <table {...props} ref={ref} className={classes}></table>\n    </TableContext.Provider>\n  );\n}\n\nfunction TableHeaderRowFn(\n  { children, ...props }: React.ThHTMLAttributes<HTMLTableRowElement>,\n  ref: React.ForwardedRef<HTMLTableRowElement>\n) {\n  const { cells } = useContext(TableContext);\n  return (\n    <thead>\n      <tr {...props} ref={ref} className=\"border-b border-black\">\n        {cells.map((cell) => (\n          <th\n            key={`header-${cell.key}`}\n            className={`${cell.width ? ` ${cell.width}` : ''}${cell.textAlign ? ` ${cell.textAlign}` : ''}`}>\n            {cell.header}\n          </th>\n        ))}\n        {children}\n      </tr>\n    </thead>\n  );\n}\n\nfunction TableHeaderFn(\n  props: React.ThHTMLAttributes<HTMLTableCellElement>,\n  ref: React.ForwardedRef<HTMLTableCellElement>\n) {\n  const { cells } = useContext(TableContext);\n  return cells.map((cell) => (\n    <th {...props} ref={ref} key={'8'}>\n      {cell.header}\n    </th>\n  ));\n}\n\nfunction TableBodyFn(\n  { children }: PropsWithChildren,\n  ref: React.ForwardedRef<HTMLTableSectionElement>\n) {\n  return <tbody ref={ref}>{children}</tbody>;\n}\n\ntype TableRowFnProps = React.TableHTMLAttributes<HTMLTableRowElement> & {\n  item: { id: string; [key: string]: any };\n};\n\nfunction TableRowFn(\n  props: TableRowFnProps,\n  ref: React.ForwardedRef<HTMLTableRowElement>\n) {\n  const classes = `table-row border-b even:bg-zinc-50${' ' + props.className}`;\n  const { cells } = useContext(TableContext);\n  const splitKey = (key: string, item: TableRowFnProps['item']) => {\n    const splits = key.split('.');\n\n    let returnVal: typeof item = item;\n\n    splits.forEach((value) => {\n      returnVal = returnVal[value];\n    });\n\n    return returnVal;\n  };\n\n  return (\n    <tr {...props} ref={ref} className={classes}>\n      {cells.map((cell) => {\n        const item = cell.key.includes('.')\n          ? splitKey(cell.key, props.item)\n          : props.item[cell.key];\n\n        return (\n          <td\n            key={`${props.item.id}-${cell.key}`}\n            className={`p-3${cell.width ? ` ${cell.width}` : ''}`}>\n            {cell.render ? cell.render(item, props.item) : item}\n          </td>\n        );\n      })}\n      {props.children}\n    </tr>\n  );\n}\n\nfunction TableCellFn(\n  props: React.TdHTMLAttributes<HTMLTableCellElement>,\n  ref: React.ForwardedRef<HTMLTableCellElement>\n) {\n  return <td {...props} ref={ref} className=\"p-3\"></td>;\n}\n\nfunction TableButtonCellFn(\n  {\n    children,\n    className,\n    ...props\n  }: React.TdHTMLAttributes<HTMLTableCellElement>,\n  ref: React.ForwardedRef<HTMLTableCellElement>\n) {\n  return (\n    <td {...props} ref={ref} className=\"pr-5\">\n      <div className={className}>{children}</div>\n    </td>\n  );\n}\n\nexport let Table = Object.assign(forwardRef(TableFn), {\n  HeaderRow: forwardRef(TableHeaderRowFn),\n  Header: forwardRef(TableHeaderFn),\n  Body: forwardRef(TableBodyFn),\n  Row: forwardRef(TableRowFn),\n  Cell: forwardRef(TableCellFn),\n  ButtonCell: forwardRef(TableButtonCellFn),\n});\n"],"names":["TableContext","createContext","TableFn","props","ref","classes","TableHeaderRowFn","children","cells","useContext","jsx","jsxs","cell","TableHeaderFn","createElement","TableBodyFn","TableRowFn","splitKey","key","item","splits","returnVal","value","TableCellFn","TableButtonCellFn","className","Table","forwardRef"],"mappings":"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"}