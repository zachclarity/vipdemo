import{K as Ke,M as We,i as Ge,y as qe,I as he,$ as $e,a as Pe,w as Ye,e as Je,x as Qe,R as Xe,b as Ze,c as et,d as Oe,u as tt,Q as nt,f as $,r as ot,g as Ie}from"./calculate-active-index-B9zBCtTZ.js";import{r as d,R as I}from"./index-CGKE_yqd.js";import{r as Y}from"./components-BktKjo96.js";import{o as x,p as _e,m as it,O as ye,K as le,U as st,a as te,n as J,b as lt,L as re,c as rt,i as ce,y as de,d as ze,W as at,_ as be,u as ut,x as ct,e as dt,f as pt,g as ft,R as mt,r as ht,s as bt,h as Ce,q as B,Y as vt,z as gt}from"./portal-5Px_MhHe.js";import{f as ve,s as ge,E as xt,m as Te,r as Re}from"./active-element-history-2tBiaAce.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new e.Error().stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="b4ef5f8d-ac73-4f9e-bd6d-1038fe317031",e._sentryDebugIdIdentifier="sentry-dbid-b4ef5f8d-ac73-4f9e-bd6d-1038fe317031")}catch{}})();function Et(e,o,t){let[n,i]=d.useState(t),r=e!==void 0,l=d.useRef(r),s=d.useRef(!1),a=d.useRef(!1);return r&&!l.current&&!s.current?(s.current=!0,l.current=r,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!r&&l.current&&!a.current&&(a.current=!0,l.current=r,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[r?e:n,x(c=>(r||i(c),o==null?void 0:o(c)))]}function St(e){let[o]=d.useState(e);return o}function De(e={},o=null,t=[]){for(let[n,i]of Object.entries(e))ke(t,Fe(o,n),i);return t}function Fe(e,o){return e?e+"["+o+"]":o}function ke(e,o,t){if(Array.isArray(t))for(let[n,i]of t.entries())ke(e,Fe(o,n.toString()),i);else t instanceof Date?e.push([o,t.toISOString()]):typeof t=="boolean"?e.push([o,t?"1":"0"]):typeof t=="string"?e.push([o,t]):typeof t=="number"?e.push([o,`${t}`]):t==null?e.push([o,""]):De(t,o,e)}let Ae=d.createContext(null);function vn(e){let[o,t]=d.useState(null);return I.createElement(Ae.Provider,{value:{target:o}},e.children,I.createElement(ve,{features:ge.Hidden,ref:t}))}function Ot({children:e}){let o=d.useContext(Ae);if(!o)return I.createElement(I.Fragment,null,e);let{target:t}=o;return t?Y.createPortal(I.createElement(I.Fragment,null,e),t):null}function It({data:e,form:o,disabled:t,onReset:n,overrides:i}){let[r,l]=d.useState(null),s=_e();return d.useEffect(()=>{if(n&&r)return s.addEventListener(r,"reset",n)},[r,o,n]),I.createElement(Ot,null,I.createElement(yt,{setForm:l,formId:o}),De(e).map(([a,c])=>I.createElement(ve,{features:ge.Hidden,...it({key:a,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:o,disabled:t,name:a,value:c,...i})})))}function yt({setForm:e,formId:o}){return d.useEffect(()=>{if(o){let t=document.getElementById(o);t&&e(t)}},[e,o]),o?null:I.createElement(ve,{features:ge.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let n=t.closest("form");n&&e(n)}})}function ee(e,o,t){let n=t.initialDeps??[],i;return()=>{var r,l,s,a;let c;t.key&&((r=t.debug)!=null&&r.call(t))&&(c=Date.now());const p=e();if(!(p.length!==n.length||p.some((u,O)=>n[O]!==u)))return i;n=p;let E;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(E=Date.now()),i=o(...p),t.key&&((s=t.debug)!=null&&s.call(t))){const u=Math.round((Date.now()-c)*100)/100,O=Math.round((Date.now()-E)*100)/100,S=O/16,h=(C,A)=>{for(C=String(C);C.length<A;)C=" "+C;return C};console.info(`%câ± ${h(O,5)} /${h(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*S,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(a=t==null?void 0:t.onChange)==null||a.call(t,i),i}}function pe(e,o){if(e===void 0)throw new Error("Unexpected undefined");return e}const Ct=(e,o)=>Math.abs(e-o)<1,Tt=(e,o,t)=>{let n;return function(...i){e.clearTimeout(n),n=e.setTimeout(()=>o.apply(this,i),t)}},Rt=e=>e,wt=e=>{const o=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let i=o;i<=t;i++)n.push(i);return n},Mt=(e,o)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const i=l=>{const{width:s,height:a}=l;o({width:Math.round(s),height:Math.round(a)})};if(i(t.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const r=new n.ResizeObserver(l=>{const s=l[0];if(s!=null&&s.borderBoxSize){const a=s.borderBoxSize[0];if(a){i({width:a.inlineSize,height:a.blockSize});return}}i(t.getBoundingClientRect())});return r.observe(t,{box:"border-box"}),()=>{r.unobserve(t)}},we={passive:!0},$t=typeof window>"u"?!0:"onscrollend"in window,Pt=(e,o)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let i=0;const r=e.options.useScrollendEvent&&$t?()=>{}:Tt(n,()=>{o(i,!1)},e.options.isScrollingResetDelay),l=c=>()=>{const{horizontal:p,isRtl:v}=e.options;i=p?t.scrollLeft*(v&&-1||1):t.scrollTop,r(),o(i,c)},s=l(!0),a=l(!1);return a(),t.addEventListener("scroll",s,we),t.addEventListener("scrollend",a,we),()=>{t.removeEventListener("scroll",s),t.removeEventListener("scrollend",a)}},_t=(e,o,t)=>{if(o!=null&&o.borderBoxSize){const n=o.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},zt=(e,{adjustments:o=0,behavior:t},n)=>{var i,r;const l=e+o;(r=(i=n.scrollElement)==null?void 0:i.scrollTo)==null||r.call(i,{[n.options.horizontal?"left":"top"]:l,behavior:t})};class Dt{constructor(o){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(i=>{i.forEach(r=>{this._measureElement(r.target,r)})}));return{disconnect:()=>{var i;(i=n())==null||i.disconnect(),t=null},observe:i=>{var r;return(r=n())==null?void 0:r.observe(i,{box:"border-box"})},unobserve:i=>{var r;return(r=n())==null?void 0:r.unobserve(i)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,i])=>{typeof i>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Rt,rangeExtractor:wt,onChange:()=>{},measureElement:_t,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...t}},this.notify=t=>{var n,i;(i=(n=this.options).onChange)==null||i.call(n,this,t)},this.maybeNotify=ee(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,r)=>{this.scrollAdjustments=0,this.scrollDirection=r?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=r,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const i=new Map,r=new Map;for(let l=n-1;l>=0;l--){const s=t[l];if(i.has(s.lane))continue;const a=r.get(s.lane);if(a==null||s.end>a.end?r.set(s.lane,s):s.end<a.end&&i.set(s.lane,!0),i.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((l,s)=>l.end===s.end?l.index-s.index:l.end-s.end)[0]:void 0},this.getMeasurementOptions=ee(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,i,r,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:i,getItemKey:r,enabled:l}),{key:!1}),this.getMeasurements=ee(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:i,getItemKey:r,enabled:l},s)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(p=>{this.itemSizeCache.set(p.key,p.size)}));const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,a);for(let p=a;p<t;p++){const v=r(p),E=this.options.lanes===1?c[p-1]:this.getFurthestMeasurement(c,p),u=E?E.end+this.options.gap:n+i,O=s.get(v),S=typeof O=="number"?O:this.options.estimateSize(p),h=u+S,C=E?E.lane:p%this.options.lanes;c[p]={index:p,start:u,size:S,end:h,key:v,lane:C}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ee(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,n,i)=>this.range=t.length>0&&n>0?Ft({measurements:t,outerSize:n,scrollOffset:i}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=ee(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,n,i,r)=>n===null?[]:t({startIndex:n.startIndex,endIndex:n.endIndex,overscan:i,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,i=t.getAttribute(n);return i?parseInt(i,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const i=this.indexFromElement(t),r=this.measurementsCache[i];if(!r)return;const l=r.key,s=this.elementsCache.get(l);s!==t&&(s&&this.observer.unobserve(s),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(i,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const i=this.measurementsCache[t];if(!i)return;const r=this.itemSizeCache.get(i.key)??i.size,l=n-r;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,l,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,i)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(i))});return}this._measureElement(t,void 0)},this.getVirtualItems=ee(()=>[this.getIndexes(),this.getMeasurements()],(t,n)=>{const i=[];for(let r=0,l=t.length;r<l;r++){const s=t[r],a=n[s];i.push(a)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return pe(n[Be(0,n.length-1,i=>pe(n[i]).start,t)])},this.getOffsetForAlignment=(t,n)=>{const i=this.getSize(),r=this.getScrollOffset();n==="auto"&&t>=r+i&&(n="end"),n==="end"&&(t-=i);const l=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[l]:this.scrollElement[l]:0)-i;return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const i=this.measurementsCache[t];if(!i)return;const r=this.getSize(),l=this.getScrollOffset();if(n==="auto")if(i.end>=l+r-this.options.scrollPaddingEnd)n="end";else if(i.start<=l+this.options.scrollPaddingStart)n="start";else return[l,n];const s=i.start-this.options.scrollPaddingStart+(i.size-r)/2;switch(n){case"center":return[this.getOffsetForAlignment(s,n),n];case"end":return[this.getOffsetForAlignment(i.end+this.options.scrollPaddingEnd,n),n];default:return[this.getOffsetForAlignment(i.start-this.options.scrollPaddingStart,n),n]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:i})},this.scrollToIndex=(t,{align:n="auto",behavior:i}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const r=this.getOffsetForIndex(t,n);if(!r)return;const[l,s]=r;this._scrollToOffset(l,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[c]=pe(this.getOffsetForIndex(t,s));Ct(c,this.getScrollOffset())||this.scrollToIndex(t,{align:s,behavior:i})}else this.scrollToIndex(t,{align:s,behavior:i})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let i;return n.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((t=n[n.length-1])==null?void 0:t.end)??0:Math.max(...n.slice(-this.options.lanes).map(r=>r.end)),Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:i})=>{this.options.scrollToFn(t,{behavior:i,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(o)}}const Be=(e,o,t,n)=>{for(;e<=o;){const i=(e+o)/2|0,r=t(i);if(r<n)e=i+1;else if(r>n)o=i-1;else return i}return e>0?e-1:0};function Ft({measurements:e,outerSize:o,scrollOffset:t}){const n=e.length-1,r=Be(0,n,s=>e[s].start,t);let l=r;for(;l<n&&e[l].end<t+o;)l++;return{startIndex:r,endIndex:l}}const Me=typeof document<"u"?d.useLayoutEffect:d.useEffect;function kt(e){const o=d.useReducer(()=>({}),{})[1],t={...e,onChange:(i,r)=>{var l;r?Y.flushSync(o):o(),(l=e.onChange)==null||l.call(e,i,r)}},[n]=d.useState(()=>new Dt(t));return n.setOptions(t),Me(()=>n._didMount(),[]),Me(()=>n._willUpdate()),n}function At(e){return kt({observeElementRect:Mt,observeElementOffset:Pt,scrollToFn:zt,...e})}function Bt(e,o){return e!==null&&o!==null&&typeof e=="object"&&typeof o=="object"&&"id"in e&&"id"in o?e.id===o.id:e===o}function Lt(e=Bt){return d.useCallback((o,t)=>{if(typeof e=="string"){let n=e;return(o==null?void 0:o[n])===(t==null?void 0:t[n])}return e(o,t)},[e])}function Le(e){let o=d.useRef({value:"",selectionStart:null,selectionEnd:null});return xt(e,"blur",t=>{let n=t.target;n instanceof HTMLInputElement&&(o.current={value:n.value,selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})}),x(()=>{if(document.activeElement!==e&&e instanceof HTMLInputElement&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==o.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:t,selectionEnd:n}=o.current;t!==null&&n!==null&&e.setSelectionRange(t,n)}o.current={value:"",selectionStart:null,selectionEnd:null}}})}function Vt({children:e,freeze:o}){let t=me(o,e);return I.createElement(I.Fragment,null,t)}function me(e,o){let[t,n]=d.useState(o);return!e&&t!==o&&n(o),e?t:o}var xe=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(xe||{}),jt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(jt||{}),Nt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Nt||{}),Ut=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Ut||{}),Ht=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.SetActivationTrigger=6]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",e[e.SetInputElement=8]="SetInputElement",e[e.SetButtonElement=9]="SetButtonElement",e[e.SetOptionsElement=10]="SetOptionsElement",e))(Ht||{});function fe(e,o=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=o(e.options.slice()),i=n.length>0&&n[0].dataRef.current.order!==null?n.sort((l,s)=>l.dataRef.current.order-s.dataRef.current.order):gt(n,l=>l.dataRef.current.domRef.current),r=t?i.indexOf(t):null;return r===-1&&(r=null),{options:i,activeOptionIndex:r}}let Kt={1(e){var o;return(o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var o,t;if((o=e.dataRef.current)!=null&&o.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let n=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(n!==-1)return{...e,activeOptionIndex:n,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,o){return e.isTyping===o.isTyping?e:{...e,isTyping:o.isTyping}},2(e,o){var t,n,i,r;if((t=e.dataRef.current)!=null&&t.disabled||e.optionsElement&&!((n=e.dataRef.current)!=null&&n.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:c,disabled:p}=e.virtual,v=o.focus===$.Specific?o.idx:Ie(o,{resolveItems:()=>c,resolveActiveIndex:()=>{var u,O;return(O=(u=e.activeOptionIndex)!=null?u:c.findIndex(S=>!p(S)))!=null?O:null},resolveDisabled:p,resolveId(){throw new Error("Function not implemented.")}}),E=(i=o.trigger)!=null?i:2;return e.activeOptionIndex===v&&e.activationTrigger===E?e:{...e,activeOptionIndex:v,activationTrigger:E,isTyping:!1,__demoMode:!1}}let l=fe(e);if(l.activeOptionIndex===null){let c=l.options.findIndex(p=>!p.dataRef.current.disabled);c!==-1&&(l.activeOptionIndex=c)}let s=o.focus===$.Specific?o.idx:Ie(o,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.current.disabled}),a=(r=o.trigger)!=null?r:2;return e.activeOptionIndex===s&&e.activationTrigger===a?e:{...e,...l,isTyping:!1,activeOptionIndex:s,activationTrigger:a,__demoMode:!1}},4:(e,o)=>{var t,n,i;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,o.payload]};let r=o.payload,l=fe(e,a=>(a.push(r),a));e.activeOptionIndex===null&&(n=e.dataRef.current)!=null&&n.isSelected(o.payload.dataRef.current.value)&&(l.activeOptionIndex=l.options.indexOf(r));let s={...e,...l,activationTrigger:2};return(i=e.dataRef.current)!=null&&i.__demoMode&&e.dataRef.current.value===void 0&&(s.activeOptionIndex=0),s},5:(e,o)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(i=>i.id!==o.id)};let n=fe(e,i=>{let r=i.findIndex(l=>l.id===o.id);return r!==-1&&i.splice(r,1),i});return{...e,...n,activationTrigger:2}},6:(e,o)=>e.activationTrigger===o.trigger?e:{...e,activationTrigger:o.trigger},7:(e,o)=>{var t,n;if(e.virtual===null)return{...e,virtual:{options:o.options,disabled:(t=o.disabled)!=null?t:()=>!1}};if(e.virtual.options===o.options&&e.virtual.disabled===o.disabled)return e;let i=e.activeOptionIndex;if(e.activeOptionIndex!==null){let r=o.options.indexOf(e.virtual.options[e.activeOptionIndex]);r!==-1?i=r:i=null}return{...e,activeOptionIndex:i,virtual:{options:o.options,disabled:(n=o.disabled)!=null?n:()=>!1}}},8:(e,o)=>e.inputElement===o.element?e:{...e,inputElement:o.element},9:(e,o)=>e.buttonElement===o.element?e:{...e,buttonElement:o.element},10:(e,o)=>e.optionsElement===o.element?e:{...e,optionsElement:o.element}},Ee=d.createContext(null);Ee.displayName="ComboboxActionsContext";function ae(e){let o=d.useContext(Ee);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ae),t}return o}let Ve=d.createContext(null);function Wt(e){let o=ne("VirtualProvider"),{options:t}=o.virtual,[n,i]=d.useMemo(()=>{let c=o.optionsElement;if(!c)return[0,0];let p=window.getComputedStyle(c);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[o.optionsElement]),r=At({enabled:t.length!==0,scrollPaddingStart:n,scrollPaddingEnd:i,count:t.length,estimateSize(){return 40},getScrollElement(){return o.optionsElement},overscan:12}),[l,s]=d.useState(0);J(()=>{s(c=>c+1)},[t]);let a=r.getVirtualItems();return a.length===0?null:I.createElement(Ve.Provider,{value:r},I.createElement("div",{style:{position:"relative",width:"100%",height:`${r.getTotalSize()}px`},ref:c=>{c&&o.activationTrigger!==0&&o.activeOptionIndex!==null&&t.length>o.activeOptionIndex&&r.scrollToIndex(o.activeOptionIndex)}},a.map(c=>{var p;return I.createElement(d.Fragment,{key:c.key},I.cloneElement((p=e.children)==null?void 0:p.call(e,{...e.slot,option:t[c.index]}),{key:`${l}-${c.key}`,"data-index":c.index,"aria-setsize":t.length,"aria-posinset":c.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${c.start}px)`,overflowAnchor:"none"}}))})))}let se=d.createContext(null);se.displayName="ComboboxDataContext";function ne(e){let o=d.useContext(se);if(o===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ne),t}return o}function Gt(e,o){return te(o.type,Kt,e,o)}let qt=d.Fragment;function Yt(e,o){var t,n;let i=st(),{value:r,defaultValue:l,onChange:s,form:a,name:c,by:p,disabled:v=i||!1,onClose:E,__demoMode:u=!1,multiple:O=!1,immediate:S=!1,virtual:h=null,nullable:C,...A}=e,_=St(l),[w=O?[]:void 0,z]=Et(r,s,_),[T,g]=d.useReducer(Gt,{dataRef:d.createRef(),comboboxState:u?0:1,isTyping:!1,options:[],virtual:h?{options:h.options,disabled:(t=h.disabled)!=null?t:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:u}),D=d.useRef(!1),H=d.useRef({static:!1,hold:!1}),L=Lt(p),K=x(m=>h?p===null?h.options.indexOf(m):h.options.findIndex(y=>L(y,m)):T.options.findIndex(y=>L(y.dataRef.current.value,m))),G=d.useCallback(m=>te(b.mode,{1:()=>w.some(y=>L(y,m)),0:()=>L(w,m)}),[w]),W=x(m=>T.activeOptionIndex===K(m)),b=d.useMemo(()=>({...T,immediate:S,optionsPropsRef:H,value:w,defaultValue:_,disabled:v,mode:O?1:0,virtual:h?T.virtual:null,get activeOptionIndex(){if(D.current&&T.activeOptionIndex===null&&(h?h.options.length>0:T.options.length>0)){if(h){let y=h.options.findIndex(U=>{var ue,Se;return!((Se=(ue=h.disabled)==null?void 0:ue.call(h,U))!=null&&Se)});if(y!==-1)return y}let m=T.options.findIndex(y=>!y.dataRef.current.disabled);if(m!==-1)return m}return T.activeOptionIndex},calculateIndex:K,compare:L,isSelected:G,isActive:W}),[w,_,v,O,u,T,h]);J(()=>{var m;h&&g({type:7,options:h.options,disabled:(m=h.disabled)!=null?m:null})},[h,h==null?void 0:h.options,h==null?void 0:h.disabled]),J(()=>{T.dataRef.current=b},[b]);let R=b.comboboxState===0;lt(R,[b.buttonElement,b.inputElement,b.optionsElement],()=>k.closeCombobox());let N=d.useMemo(()=>{var m,y,U;return{open:b.comboboxState===0,disabled:v,activeIndex:b.activeOptionIndex,activeOption:b.activeOptionIndex===null?null:b.virtual?b.virtual.options[(m=b.activeOptionIndex)!=null?m:0]:(U=(y=b.options[b.activeOptionIndex])==null?void 0:y.dataRef.current.value)!=null?U:null,value:w}},[b,v,w]),q=x(()=>{if(b.activeOptionIndex!==null){if(k.setIsTyping(!1),b.virtual)f(b.virtual.options[b.activeOptionIndex]);else{let{dataRef:m}=b.options[b.activeOptionIndex];f(m.current.value)}k.goToOption($.Specific,b.activeOptionIndex)}}),Q=x(()=>{g({type:0}),D.current=!0}),Z=x(()=>{g({type:1}),D.current=!1,E==null||E()}),oe=x(m=>{g({type:3,isTyping:m})}),ie=x((m,y,U)=>(D.current=!1,m===$.Specific?g({type:2,focus:$.Specific,idx:y,trigger:U}):g({type:2,focus:m,trigger:U}))),F=x((m,y)=>(g({type:4,payload:{id:m,dataRef:y}}),()=>{b.isActive(y.current.value)&&(D.current=!0),g({type:5,id:m})})),f=x(m=>te(b.mode,{0(){return z==null?void 0:z(m)},1(){let y=b.value.slice(),U=y.findIndex(ue=>L(ue,m));return U===-1?y.push(m):y.splice(U,1),z==null?void 0:z(y)}})),V=x(m=>{g({type:6,trigger:m})}),P=x(m=>{g({type:8,element:m})}),j=x(m=>{g({type:9,element:m})}),M=x(m=>{g({type:10,element:m})}),k=d.useMemo(()=>({onChange:f,registerOption:F,goToOption:ie,setIsTyping:oe,closeCombobox:Z,openCombobox:Q,setActivationTrigger:V,selectActiveOption:q,setInputElement:P,setButtonElement:j,setOptionsElement:M}),[]),[X,je]=Ke(),Ne=o===null?{}:{ref:o},Ue=d.useCallback(()=>{if(_!==void 0)return z==null?void 0:z(_)},[z,_]),He=re();return I.createElement(je,{value:X,props:{htmlFor:(n=b.inputElement)==null?void 0:n.id},slot:{open:b.comboboxState===0,disabled:v}},I.createElement(We,null,I.createElement(Ee.Provider,{value:k},I.createElement(se.Provider,{value:b},I.createElement(rt,{value:te(b.comboboxState,{0:ce.Open,1:ce.Closed})},c!=null&&I.createElement(It,{disabled:v,data:w!=null?{[c]:w}:{},form:a,onReset:Ue}),He({ourProps:Ne,theirProps:A,slot:N,defaultTag:qt,name:"Combobox"}))))))}let Jt="input";function Qt(e,o){var t,n,i,r,l;let s=ne("Combobox.Input"),a=ae("Combobox.Input"),c=d.useId(),p=Ge(),{id:v=p||`headlessui-combobox-input-${c}`,onChange:E,displayValue:u,disabled:O=s.disabled||!1,autoFocus:S=!1,type:h="text",...C}=e,A=d.useRef(null),_=de(A,o,qe(),a.setInputElement),w=ze(s.inputElement),z=_e(),T=x(()=>{a.onChange(null),s.optionsElement&&(s.optionsElement.scrollTop=0),a.goToOption($.Nothing)}),g=d.useMemo(()=>{var f;return typeof u=="function"&&s.value!==void 0?(f=u(s.value))!=null?f:"":typeof s.value=="string"?s.value:""},[s.value,u]);Te(([f,V],[P,j])=>{if(s.isTyping)return;let M=A.current;M&&((j===0&&V===1||f!==P)&&(M.value=f),requestAnimationFrame(()=>{if(s.isTyping||!M||(w==null?void 0:w.activeElement)!==M)return;let{selectionStart:k,selectionEnd:X}=M;Math.abs((X??0)-(k??0))===0&&k===0&&M.setSelectionRange(M.value.length,M.value.length)}))},[g,s.comboboxState,w,s.isTyping]),Te(([f],[V])=>{if(f===0&&V===1){if(s.isTyping)return;let P=A.current;if(!P)return;let j=P.value,{selectionStart:M,selectionEnd:k,selectionDirection:X}=P;P.value="",P.value=j,X!==null?P.setSelectionRange(M,k,X):P.setSelectionRange(M,k)}},[s.comboboxState]);let D=d.useRef(!1),H=x(()=>{D.current=!0}),L=x(()=>{z.nextFrame(()=>{D.current=!1})}),K=x(f=>{switch(a.setIsTyping(!0),f.key){case B.Enter:if(s.comboboxState!==0||D.current)return;if(f.preventDefault(),f.stopPropagation(),s.activeOptionIndex===null){a.closeCombobox();return}a.selectActiveOption(),s.mode===0&&a.closeCombobox();break;case B.ArrowDown:return f.preventDefault(),f.stopPropagation(),te(s.comboboxState,{0:()=>a.goToOption($.Next),1:()=>a.openCombobox()});case B.ArrowUp:return f.preventDefault(),f.stopPropagation(),te(s.comboboxState,{0:()=>a.goToOption($.Previous),1:()=>{Y.flushSync(()=>a.openCombobox()),s.value||a.goToOption($.Last)}});case B.Home:if(f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),a.goToOption($.First);case B.PageUp:return f.preventDefault(),f.stopPropagation(),a.goToOption($.First);case B.End:if(f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),a.goToOption($.Last);case B.PageDown:return f.preventDefault(),f.stopPropagation(),a.goToOption($.Last);case B.Escape:return s.comboboxState!==0?void 0:(f.preventDefault(),s.optionsElement&&!s.optionsPropsRef.current.static&&f.stopPropagation(),s.mode===0&&s.value===null&&T(),a.closeCombobox());case B.Tab:if(s.comboboxState!==0)return;s.mode===0&&s.activationTrigger!==1&&a.selectActiveOption(),a.closeCombobox();break}}),G=x(f=>{E==null||E(f),s.mode===0&&f.target.value===""&&T(),a.openCombobox()}),W=x(f=>{var V,P,j;let M=(V=f.relatedTarget)!=null?V:Re.find(k=>k!==f.currentTarget);if(!((P=s.optionsElement)!=null&&P.contains(M))&&!((j=s.buttonElement)!=null&&j.contains(M))&&s.comboboxState===0)return f.preventDefault(),s.mode===0&&s.value===null&&T(),a.closeCombobox()}),b=x(f=>{var V,P,j;let M=(V=f.relatedTarget)!=null?V:Re.find(k=>k!==f.currentTarget);(P=s.buttonElement)!=null&&P.contains(M)||(j=s.optionsElement)!=null&&j.contains(M)||s.disabled||s.immediate&&s.comboboxState!==0&&z.microTask(()=>{Y.flushSync(()=>a.openCombobox()),a.setActivationTrigger(1)})}),R=he(),N=at(),{isFocused:q,focusProps:Q}=$e({autoFocus:S}),{isHovered:Z,hoverProps:oe}=Pe({isDisabled:O}),ie=d.useMemo(()=>({open:s.comboboxState===0,disabled:O,hover:Z,focus:q,autofocus:S}),[s,Z,q,S,O]),F=be({ref:_,id:v,role:"combobox",type:h,"aria-controls":(t=s.optionsElement)==null?void 0:t.id,"aria-expanded":s.comboboxState===0,"aria-activedescendant":s.activeOptionIndex===null?void 0:s.virtual?(n=s.options.find(f=>!f.dataRef.current.disabled&&s.compare(f.dataRef.current.value,s.virtual.options[s.activeOptionIndex])))==null?void 0:n.id:(i=s.options[s.activeOptionIndex])==null?void 0:i.id,"aria-labelledby":R,"aria-describedby":N,"aria-autocomplete":"list",defaultValue:(l=(r=e.defaultValue)!=null?r:s.defaultValue!==void 0?u==null?void 0:u(s.defaultValue):null)!=null?l:s.defaultValue,disabled:O||void 0,autoFocus:S,onCompositionStart:H,onCompositionEnd:L,onKeyDown:K,onChange:G,onFocus:b,onBlur:W},Q,oe);return re()({ourProps:F,theirProps:C,slot:ie,defaultTag:Jt,name:"Combobox.Input"})}let Xt="button";function Zt(e,o){var t;let n=ne("Combobox.Button"),i=ae("Combobox.Button"),r=de(o,i.setButtonElement),l=d.useId(),{id:s=`headlessui-combobox-button-${l}`,disabled:a=n.disabled||!1,autoFocus:c=!1,...p}=e,v=Le(n.inputElement),E=x(g=>{switch(g.key){case B.Space:case B.Enter:g.preventDefault(),g.stopPropagation(),n.comboboxState===1&&Y.flushSync(()=>i.openCombobox()),v();return;case B.ArrowDown:g.preventDefault(),g.stopPropagation(),n.comboboxState===1&&(Y.flushSync(()=>i.openCombobox()),n.value||i.goToOption($.First)),v();return;case B.ArrowUp:g.preventDefault(),g.stopPropagation(),n.comboboxState===1&&(Y.flushSync(()=>i.openCombobox()),n.value||i.goToOption($.Last)),v();return;case B.Escape:if(n.comboboxState!==0)return;g.preventDefault(),n.optionsElement&&!n.optionsPropsRef.current.static&&g.stopPropagation(),Y.flushSync(()=>i.closeCombobox()),v();return;default:return}}),u=x(g=>{g.preventDefault(),!ot(g.currentTarget)&&(g.button===xe.Left&&(n.comboboxState===0?i.closeCombobox():i.openCombobox()),v())}),O=he([s]),{isFocusVisible:S,focusProps:h}=$e({autoFocus:c}),{isHovered:C,hoverProps:A}=Pe({isDisabled:a}),{pressed:_,pressProps:w}=Ye({disabled:a}),z=d.useMemo(()=>({open:n.comboboxState===0,active:_||n.comboboxState===0,disabled:a,value:n.value,hover:C,focus:S}),[n,C,S,_,a]),T=be({ref:r,id:s,type:Je(e,n.buttonElement),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(t=n.optionsElement)==null?void 0:t.id,"aria-expanded":n.comboboxState===0,"aria-labelledby":O,disabled:a||void 0,autoFocus:c,onMouseDown:u,onKeyDown:E},h,A,w);return re()({ourProps:T,theirProps:p,slot:z,defaultTag:Xt,name:"Combobox.Button"})}let en="div",tn=ye.RenderStrategy|ye.Static;function nn(e,o){var t,n,i;let r=d.useId(),{id:l=`headlessui-combobox-options-${r}`,hold:s=!1,anchor:a,portal:c=!1,modal:p=!0,transition:v=!1,...E}=e,u=ne("Combobox.Options"),O=ae("Combobox.Options"),S=Qe(a);S&&(c=!0);let[h,C]=Xe(S),[A,_]=d.useState(null),w=Ze(),z=de(o,S?h:null,O.setOptionsElement,_),T=ze(u.optionsElement),g=ut(),[D,H]=ct(v,A,g!==null?(g&ce.Open)===ce.Open:u.comboboxState===0);dt(D,u.inputElement,O.closeCombobox);let L=u.__demoMode?!1:p&&u.comboboxState===0;pt(L,T);let K=u.__demoMode?!1:p&&u.comboboxState===0;ft(K,{allowed:d.useCallback(()=>[u.inputElement,u.buttonElement,u.optionsElement],[u.inputElement,u.buttonElement,u.optionsElement])}),J(()=>{var F;u.optionsPropsRef.current.static=(F=e.static)!=null?F:!1},[u.optionsPropsRef,e.static]),J(()=>{u.optionsPropsRef.current.hold=s},[u.optionsPropsRef,s]),et(u.comboboxState===0,{container:u.optionsElement,accept(F){return F.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:F.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(F){F.setAttribute("role","none")}});let G=he([(t=u.buttonElement)==null?void 0:t.id]),W=d.useMemo(()=>({open:u.comboboxState===0,option:void 0}),[u.comboboxState]),b=x(()=>{O.setActivationTrigger(0)}),R=x(F=>{F.preventDefault(),O.setActivationTrigger(0)}),N=be(S?w():{},{"aria-labelledby":G,role:"listbox","aria-multiselectable":u.mode===1?!0:void 0,id:l,ref:z,style:{...E.style,...C,"--input-width":Oe(u.inputElement,!0).width,"--button-width":Oe(u.buttonElement,!0).width},onWheel:u.activationTrigger===0?void 0:b,onMouseDown:R,...mt(H)}),q=D&&u.comboboxState===1,Q=me(q,(n=u.virtual)==null?void 0:n.options),Z=me(q,u.value),oe=x(F=>u.compare(Z,F));if(u.virtual){if(Q===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(E,{children:I.createElement(se.Provider,{value:Q!==u.virtual.options?{...u,virtual:{...u.virtual,options:Q}}:u},I.createElement(Wt,{slot:W},E.children))})}let ie=re();return I.createElement(ht,{enabled:c?e.static||D:!1},I.createElement(se.Provider,{value:u.mode===1?u:{...u,isSelected:oe}},ie({ourProps:N,theirProps:{...E,children:I.createElement(Vt,{freeze:q},typeof E.children=="function"?(i=E.children)==null?void 0:i.call(E,W):E.children)},slot:W,defaultTag:en,features:tn,visible:D,name:"Combobox.Options"})))}let on="div";function sn(e,o){var t,n,i,r;let l=ne("Combobox.Option"),s=ae("Combobox.Option"),a=d.useId(),{id:c=`headlessui-combobox-option-${a}`,value:p,disabled:v=(i=(n=(t=l.virtual)==null?void 0:t.disabled)==null?void 0:n.call(t,p))!=null?i:!1,order:E=null,...u}=e,O=Le(l.inputElement),S=l.virtual?l.activeOptionIndex===l.calculateIndex(p):l.activeOptionIndex===null?!1:((r=l.options[l.activeOptionIndex])==null?void 0:r.id)===c,h=l.isSelected(p),C=d.useRef(null),A=bt({disabled:v,value:p,domRef:C,order:E}),_=d.useContext(Ve),w=de(o,C,_?_.measureElement:null),z=x(()=>{s.setIsTyping(!1),s.onChange(p)});J(()=>s.registerOption(c,A),[A,c]);let T=d.useRef(!(l.virtual||l.__demoMode));J(()=>{if(!l.virtual&&!l.__demoMode)return Ce().requestAnimationFrame(()=>{T.current=!0})},[l.virtual,l.__demoMode]),J(()=>{if(T.current&&l.comboboxState===0&&S&&l.activationTrigger!==0)return Ce().requestAnimationFrame(()=>{var R,N;(N=(R=C.current)==null?void 0:R.scrollIntoView)==null||N.call(R,{block:"nearest"})})},[C,S,l.comboboxState,l.activationTrigger,l.activeOptionIndex]);let g=x(R=>{R.preventDefault(),R.button===xe.Left&&(v||(z(),vt()||requestAnimationFrame(()=>O()),l.mode===0&&s.closeCombobox()))}),D=x(()=>{if(v)return s.goToOption($.Nothing);let R=l.calculateIndex(p);s.goToOption($.Specific,R)}),H=tt(),L=x(R=>H.update(R)),K=x(R=>{if(!H.wasMoved(R)||v||S)return;let N=l.calculateIndex(p);s.goToOption($.Specific,N,0)}),G=x(R=>{H.wasMoved(R)&&(v||S&&(l.optionsPropsRef.current.hold||s.goToOption($.Nothing)))}),W=d.useMemo(()=>({active:S,focus:S,selected:h,disabled:v}),[S,h,v]),b={id:c,ref:w,role:"option",tabIndex:v===!0?void 0:-1,"aria-disabled":v===!0?!0:void 0,"aria-selected":h,disabled:void 0,onMouseDown:g,onFocus:D,onPointerEnter:L,onMouseEnter:L,onPointerMove:K,onMouseMove:K,onPointerLeave:G,onMouseLeave:G};return re()({ourProps:b,theirProps:u,slot:W,defaultTag:on,name:"Combobox.Option"})}let ln=le(Yt),rn=le(Zt),an=le(Qt),un=nt,cn=le(nn),dn=le(sn),gn=Object.assign(ln,{Input:an,Button:rn,Label:un,Options:cn,Option:dn});export{an as G,gn as H,cn as K,rn as U,vn as W,dn as j};
//# sourceMappingURL=combobox-ZyOtD84C.js.map
