import{j as e,b as g,c as j,O as y}from"./index-CGKE_yqd.js";import{E as v}from"./ErrorReport-DufojM8E.js";import{X as N,S as w,F as C,D as k}from"./Icons-xSRdgZPx.js";import{u as I}from"./useMatchesData-C6FIMaQn.js";import{S as R,F as D}from"./status-CQRghG0j.js";import"./index-CPe-BBEd.js";import{a as S,L as f}from"./components-BktKjo96.js";import{i as o}from"./index-browser-BzJTmVxG.js";import{y as _,Y as B}from"./dialog-cts_RZz3.js";import"./node-B4O4sgZ3.js";import"./BuildingLibraryIcon-BQrivYGg.js";import"./portal-5Px_MhHe.js";import"./active-element-history-2tBiaAce.js";import"./transition-DpAM4Mvv.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="4a11a860-4e7c-4ec7-901a-55ab32ba4c2f",t._sentryDebugIdIdentifier="sentry-dbid-4a11a860-4e7c-4ec7-901a-55ab32ba4c2f")}catch{}})();function m({type:t,itemId:s,loggedInUser:a}){const l=S(),c="inline-flex disabled:cursor-not-allowed flex-1 justify-center items-center rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",r=`${c} disabled:bg-red-400 bg-red-600 hover:bg-red-500 focus-visible:outline-red-600`,n=`${c} disabled:bg-green-300 bg-green-600 hover:bg-green-500 focus-visible:outline-green-600`,i={complete:{text:"Mark Complete",styles:n,formValue:"update"},incomplete:{text:"Unsign",styles:r,formValue:"incomplete"},ready:{text:"Mark Ready",styles:n,formValue:"markready"},notReady:{text:"Mark Not Ready",styles:r,formValue:"notready"}};return e.jsxs(l.Form,{method:"POST",className:"text-white text-center flex-1 inline-flex",action:"/checklist",children:[e.jsx("input",{type:"hidden",value:s,name:"itemId"}),e.jsx("input",{type:"hidden",value:a,name:"userId"}),e.jsx("button",{type:"submit",name:"_action",value:i[t].formValue,disabled:l.state!=="idle",className:`${c} ${i[t].styles}`,children:l.state==="idle"?i[t].text:"Processing..."})]})}function z(){const t=g();let s="View Messages",a="comments";return t.pathname.endsWith("comments")&&(s="Back to Details",a="."),e.jsx(f,{className:"flex-1 inline-flex justify-center shadow-[0px_6px_8px_-3px_rgba(0,0,0,0.3)] transition-all items-center rounded-md border-0 border-primary-500 hover:border-primary-600 bg-primary-600 px-3.5 py-2.5 text-sm font-semibold text-white hover:bg-primary-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600  ",to:a,children:s})}function E({status:t,itemId:s,loggedInUser:a}){return t===o.ChecklistItemStatus.WaitingApproval?e.jsx(m,{type:"notReady",itemId:s,loggedInUser:a}):t===o.ChecklistItemStatus.WaitingMember||t===o.ChecklistItemStatus.Denied?e.jsx(m,{type:"ready",itemId:s,loggedInUser:a}):null}function M({status:t,itemId:s,loggedInUser:a}){return t===o.ChecklistItemStatus.Completed?e.jsx(m,{type:"incomplete",itemId:s,loggedInUser:a}):t===o.ChecklistItemStatus.WaitingMember?e.jsx(m,{type:"complete",itemId:s,loggedInUser:a}):null}function H(){var x,u;const t=j(),{item:s,comments:a,loggedInUser:l}=I(),c=d=>d==="USER",r=d=>d!=="USER",n=new Date(s==null?void 0:s.createdAt);n.setDate(n.getDate()+30);const i=()=>{t("..")},h=d=>{let p=0;for(const b of d)b.readBy.includes(l)||p++;return p};return e.jsx(e.Fragment,{children:e.jsx(_,{as:"div",id:"slideover",className:"fixed inset-0",open:!0,onClose:i,children:e.jsxs("div",{className:"flex justify-end min-h-screen",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:i}),e.jsxs("div",{className:"z-50 bg-white shadow-lg min-h-screen h-screen w-full md:w-5/12 grid grid-cols-1 grid-rows-[auto_minmax(14rem,1fr)] overflow-y-scroll",children:[e.jsxs("div",{className:`grid gap-y-2 grid-cols-2 grid-rows-[2rem_2rem_0.25rem_${s.isComplete?"4rem":"2rem"}_0.25rem]`,children:[e.jsxs("div",{className:"flex col-span-2 row-span-1 py-5 pl-3 pr-5 justify-between items-center bg-gradient-to-r from-blue-200 to-blue-100 border-b border-b-blue-500",children:[e.jsx(B,{className:"font-bold mb-1 text-2xl pl-2",children:((x=s.templateItem.reference)==null?void 0:x.name)??s.templateItem.name}),e.jsx(N,{className:"w-10 h-10 hover:cursor-pointer",onClick:i})]}),e.jsx("div",{className:"col-span-2 mx-5",children:e.jsxs("div",{className:"col-span-2 flex my-3 flex-wrap gap-x-5",children:[e.jsx(z,{}),r(s.templateItem.requiredRole.abbreviation)&&e.jsx(E,{status:s.status,itemId:s.id,loggedInUser:l}),c(s.templateItem.requiredRole.abbreviation)&&e.jsx(M,{status:s.status,itemId:s.id,loggedInUser:l})]})}),e.jsx("div",{className:"col-span-2",children:e.jsx("hr",{className:"h-px bg-zinc-100"})}),e.jsxs("div",{className:"col-span-2 text-lg mx-5 my-2",children:[e.jsx("div",{className:"flex gap-4 items-center justify-between",children:e.jsx("h4",{className:"font-bold text-xl",children:"Status"})}),e.jsx("div",{className:"mt-2",children:e.jsx(R,{status:s.status,isSlideOver:!0})}),s.isComplete&&r(s.templateItem.requiredRole.abbreviation)&&e.jsxs("div",{className:"flex mt-2 mx-3",children:["Approved By:",e.jsx("p",{className:"pl-4 font-semibold text-md place-content-center",children:(u=s.completedBy)==null?void 0:u.name})]}),e.jsx("div",{className:"text-sm text-zinc-600 mx-3 mt-4",children:e.jsxs("div",{className:"flex gap-5 justify-between",children:[e.jsxs("div",{className:"inline-flex items-center",children:[s.status===o.ChecklistItemStatus.Completed&&e.jsx(w,{className:"size-6 text-green-500 mr-1"}),!s.isComplete&&!s.dateCompleted&&e.jsx(C,{className:"size-6 mr-2"}),new Date(s.dateCompleted??n).toDateString()]}),e.jsxs(f,{className:"inline-flex items-center gap-1.5 hover:bg-zinc-300 hover:rounded-lg p-1",to:`/checklist/${s.id}/comments`,children:[e.jsx(D,{className:"size-6"}),a&&e.jsxs(e.Fragment,{children:[a.length,h(a)>0&&e.jsxs("span",{className:"relative flex size-2",children:[e.jsx("span",{className:"animate-[ping_1s_ease-in-out_5] absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full size-2 bg-red-500"})]})]}),!a&&"0"]}),e.jsxs("div",{className:"inline-flex gap-1 ml-3",children:[e.jsx(k,{className:"size-6"}),new Date(s.updatedAt).toDateString()]})]})})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("hr",{className:"h-px bg-zinc-100"})}),r(s.templateItem.requiredRole.abbreviation)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-2 mx-5",children:[e.jsx("h4",{className:"text-xl font-bold",children:s.templateItem.requiredRole.name}),e.jsxs("dl",{className:"grid grid-cols-1 my-4 gap-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{children:"Email"}),e.jsx("dd",{children:e.jsx("a",{href:`mailto:${s.templateItem.requiredRole.orgRoles[0].contactEmail}`,className:"underline underline-offset-2",children:s.templateItem.requiredRole.orgRoles[0].contactEmail})})]}),e.jsx("hr",{className:"h-px bg-zinc-100"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{children:"Phone"}),e.jsx("dd",{children:s.templateItem.requiredRole.orgRoles[0].contactPhone})]})]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("hr",{className:"h-px bg-zinc-100"})})]})]}),e.jsx(y,{context:{item:s,comments:a,loggedInUser:l}})]})]})})})}const J=v;export{J as ErrorBoundary,H as default};
//# sourceMappingURL=_layout-BSRudGFR.js.map
