{"version":3,"file":"ErrorReport-DufojM8E.js","sources":["../../../node_modules/@sentry/remix/build/esm/utils/vendor/response.js","../../../node_modules/@sentry/remix/build/esm/client/errors.js","../../../app/components/ui/ErrorReport.tsx"],"sourcesContent":["import { _optionalChain } from '@sentry/core';\nimport { matchRoutes } from '@remix-run/router';\n\n/**\n * Based on Remix Implementation\n *\n * https://github.com/remix-run/remix/blob/7688da5c75190a2e29496c78721456d6e12e3abe/packages/remix-server-runtime/data.ts#L131-L145\n */\nasync function extractData(response) {\n  const contentType = response.headers.get('Content-Type');\n\n  // Cloning the response to avoid consuming the original body stream\n  const responseClone = response.clone();\n\n  if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n    return responseClone.json();\n  }\n\n  return responseClone.text();\n}\n\n/**\n * Taken from Remix Implementation\n *\n * https://github.com/remix-run/remix/blob/32300ec6e6e8025602cea63e17a2201989589eab/packages/remix-server-runtime/responses.ts#L60-L77\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isResponse(value) {\n  return (\n    value != null &&\n    /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n    typeof value.status === 'number' &&\n    typeof value.statusText === 'string' &&\n    typeof value.headers === 'object' &&\n    typeof value.body !== 'undefined'\n    /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n  );\n}\n\n// https://github.com/remix-run/remix/blob/7688da5c75190a2e29496c78721456d6e12e3abe/packages/remix-server-runtime/responses.ts#L1-L4\n\n/**\n * This is a shortcut for creating `application/json` responses. Converts `data`\n * to JSON and sets the `Content-Type` header.\n *\n * @see https://remix.run/api/remix#json\n *\n * https://github.com/remix-run/remix/blob/7688da5c75190a2e29496c78721456d6e12e3abe/packages/remix-server-runtime/responses.ts#L12-L24\n */\nconst json = (data, init = {}) => {\n  const responseInit = typeof init === 'number' ? { status: init } : init;\n  const headers = new Headers(responseInit.headers);\n  if (!headers.has('Content-Type')) {\n    headers.set('Content-Type', 'application/json; charset=utf-8');\n  }\n  return new Response(JSON.stringify(data), {\n    ...responseInit,\n    headers,\n  });\n};\n\n/**\n * Remix Implementation:\n * https://github.com/remix-run/remix/blob/38e127b1d97485900b9c220d93503de0deb1fc81/packages/remix-server-runtime/routeMatching.ts#L12-L24\n *\n * Changed so that `matchRoutes` function is passed in.\n */\nfunction matchServerRoutes(\n  routes,\n  pathname,\n) {\n  const matches = matchRoutes(routes, pathname);\n\n  if (!matches) {\n    return null;\n  }\n\n  return matches.map(match => ({\n    params: match.params,\n    pathname: match.pathname,\n    route: match.route,\n    pathnameBase: match.pathnameBase,\n  }));\n}\n\n/**\n * https://github.com/remix-run/remix/blob/97999d02493e8114c39d48b76944069d58526e8d/packages/remix-server-runtime/server.ts#L573-L586\n */\nfunction isIndexRequestUrl(url) {\n  for (const param of url.searchParams.getAll('index')) {\n    // only use bare `?index` params without a value\n    // ✅ /foo?index\n    // ✅ /foo?index&index=123\n    // ✅ /foo?index=123&index\n    // ❌ /foo?index=123\n    if (param === '') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * https://github.com/remix-run/remix/blob/97999d02493e8114c39d48b76944069d58526e8d/packages/remix-server-runtime/server.ts#L588-L596\n */\nfunction getRequestMatch(\n  url,\n  matches,\n) {\n  const match = matches.slice(-1)[0] ;\n\n  if (!isIndexRequestUrl(url) && _optionalChain([match, 'access', _ => _.route, 'access', _2 => _2.id, 'optionalAccess', _3 => _3.endsWith, 'call', _4 => _4('/index')])) {\n    return matches.slice(-2)[0] ;\n  }\n\n  return match;\n}\n\n/**\n * https://github.com/remix-run/remix/blob/3e589152bc717d04e2054c31bea5a1056080d4b9/packages/remix-server-runtime/responses.ts#L75-L85\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isDeferredData(value) {\n  const deferred = value;\n  return (\n    deferred &&\n    typeof deferred === 'object' &&\n    typeof deferred.data === 'object' &&\n    typeof deferred.subscribe === 'function' &&\n    typeof deferred.cancel === 'function' &&\n    typeof deferred.resolveData === 'function'\n  );\n}\n\n/**\n * https://github.com/remix-run/react-router/blob/f9b3dbd9cbf513366c456b33d95227f42f36da63/packages/router/utils.ts#L1574\n *\n * Check if the given error is an ErrorResponse generated from a 4xx/5xx\n * Response thrown from an action/loader\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRouteErrorResponse(value) {\n  const error = value;\n\n  return (\n    error != null &&\n    typeof error.status === 'number' &&\n    typeof error.statusText === 'string' &&\n    typeof error.internal === 'boolean' &&\n    'data' in error\n  );\n}\n\nexport { extractData, getRequestMatch, isDeferredData, isIndexRequestUrl, isResponse, isRouteErrorResponse, json, matchServerRoutes };\n//# sourceMappingURL=response.js.map\n","import { isNodeEnv, captureException } from '@sentry/core';\nimport { isResponse } from '../utils/vendor/response.js';\n\n/**\n * Captures an error that is thrown inside a Remix ErrorBoundary.\n *\n * @param error The error to capture.\n * @returns void\n */\nfunction captureRemixErrorBoundaryError(error) {\n  // Server-side errors also appear here without their stacktraces.\n  // So, we only capture client-side runtime errors here.\n  // ErrorResponses that are 5xx errors captured at loader / action level by `captureRemixRouteError` function,\n  // And other server-side errors captured in `handleError` function where stacktraces are available.\n  //\n  // We don't want to capture:\n  // - Response Errors / Objects [They are originated and handled on the server-side]\n  // - SSR Errors [They are originated and handled on the server-side]\n  // - Anything without a stacktrace [Remix trims the stacktrace of the errors that are thrown on the server-side]\n  if (isResponse(error) || isNodeEnv() || !(error instanceof Error)) {\n    return;\n  }\n\n  return captureException(error, {\n    mechanism: {\n      type: 'instrument',\n      handled: false,\n      data: {\n        function: 'ReactError',\n      },\n    },\n  });\n}\n\nexport { captureRemixErrorBoundaryError };\n//# sourceMappingURL=errors.js.map\n","import {\n  useRouteError,\n  isRouteErrorResponse,\n} from '@remix-run/react';\nimport { captureRemixErrorBoundaryError } from '@sentry/remix';\n\nexport default function ErrorReport() {\n  const error = useRouteError();\n  captureRemixErrorBoundaryError(error);\n\n  if (isRouteErrorResponse(error)) {\n    return (\n      <div>\n        <p>\n          To help us make Virtual In-Processing better be please file a bug\n          report,{' '}\n          <a\n            className=\"text-blue-700 underline hover:text-blue-300 active:text-blue-400 visited:text-blue-700\"\n            href=\"https://travisspark.atlassian.net/servicedesk/customer/portal/4\"\n            target=\"_blank\"\n            rel=\"noreferrer\">\n            here\n          </a>\n          .\n        </p>\n        <h1>\n          {error.status} {error.statusText}\n        </h1>\n        <p>{error.data.message}</p>\n      </div>\n    );\n  } else if (error instanceof Error) {\n    return (\n      <div className=\"p-5 min-w-[600px] max-w-full\">\n        <div className=\"\">\n          <p>\n            An unexpected error has occurred please use the form below to\n            provide more information.\n          </p>\n          <p>\n            To help us make Virtual In-Processing better be please file a bug\n            report,{' '}\n            <a\n              className=\"text-blue-700 underline hover:text-blue-300 active:text-blue-400 visited:text-blue-700\"\n              href=\"https://travisspark.atlassian.net/servicedesk/customer/portal/4\"\n              target=\"_blank\"\n              rel=\"noreferrer\">\n              here\n            </a>\n            .\n          </p>\n        </div>\n        {process.env.NODE_ENV === 'development' && (\n          <>\n            <h1 className=\"font-bold mb-1\">\n              This error will be automatically sent with your report\n            </h1>\n            <div className=\"bg-gray-300 p-2\">\n              <h1 className=\"font-bold\">Error</h1>\n              <p>{error.message}</p>\n              <p className=\"font-bold\">The stack trace is:</p>\n              <pre className=\"text-wrap\">{error.stack}</pre>\n            </div>\n          </>\n        )}\n      </div>\n    );\n  } else {\n    return (\n      <>\n        <h1>Unknown Error Encountered</h1>\n        <p>\n          To help us make Virtual In-Processing better be please file a bug\n          report,{' '}\n          <a\n            className=\"text-blue-700 underline hover:text-blue-300 active:text-blue-400 visited:text-blue-700\"\n            href=\"https://travisspark.atlassian.net/servicedesk/customer/portal/4\"\n            target=\"_blank\"\n            rel=\"noreferrer\">\n            here\n          </a>\n          .\n        </p>\n      </>\n    );\n  }\n}\n"],"names":["isResponse","value","captureRemixErrorBoundaryError","error","isNodeEnv","captureException","ErrorReport","useRouteError","isRouteErrorResponse","jsxs","jsx","Fragment"],"mappings":"ybA2BA,SAASA,EAAWC,EAAO,CACzB,OACEA,GAAS,MAET,OAAOA,EAAM,QAAW,UACxB,OAAOA,EAAM,YAAe,UAC5B,OAAOA,EAAM,SAAY,UACzB,OAAOA,EAAM,KAAS,GAG1B,CC5BA,SAASC,EAA+BC,EAAO,CAU7C,GAAI,EAAAH,EAAWG,CAAK,GAAKC,EAAW,GAAI,EAAED,aAAiB,QAI3D,OAAOE,EAAiBF,EAAO,CAC7B,UAAW,CACT,KAAM,aACN,QAAS,GACT,KAAM,CACJ,SAAU,YACX,CACF,CACL,CAAG,CACH,CC1BA,SAAwBG,GAAc,CACpC,MAAMH,EAAQI,EAAc,EAGxB,OAFJL,EAA+BC,CAAK,EAEhCK,EAAqBL,CAAK,SAEzB,MACC,CAAA,SAAA,CAAAM,OAAC,IAAE,CAAA,SAAA,CAAA,4EAEO,IACRC,EAAA,IAAC,IAAA,CACC,UAAU,yFACV,KAAK,kEACL,OAAO,SACP,IAAI,aAAa,SAAA,MAAA,CAEnB,EAAI,GAAA,EAEN,SACC,KACE,CAAA,SAAA,CAAMP,EAAA,OAAO,IAAEA,EAAM,UAAA,EACxB,QACC,IAAA,CAAG,SAAMA,EAAA,KAAK,OAAQ,CAAA,CAAA,EACzB,EAEOA,aAAiB,MAEvBM,EAAA,KAAA,MAAI,CAAA,UAAU,+BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,GACb,SAAA,CAACC,EAAAA,IAAA,KAAE,SAGH,0FAAA,SACC,IAAE,CAAA,SAAA,CAAA,4EAEO,IACRA,EAAA,IAAC,IAAA,CACC,UAAU,yFACV,KAAK,kEACL,OAAO,SACP,IAAI,aAAa,SAAA,MAAA,CAEnB,EAAI,GAAA,CAEN,CAAA,CAAA,EACF,EACC,EAAA,EAaH,EAKED,EAAA,KAAAE,WAAA,CAAA,SAAA,CAACD,EAAAA,IAAA,MAAG,SAAyB,4BAAA,SAC5B,IAAE,CAAA,SAAA,CAAA,4EAEO,IACRA,EAAA,IAAC,IAAA,CACC,UAAU,yFACV,KAAK,kEACL,OAAO,SACP,IAAI,aAAa,SAAA,MAAA,CAEnB,EAAI,GAAA,CAEN,CAAA,CAAA,EACF,CAGN","x_google_ignoreList":[0,1]}