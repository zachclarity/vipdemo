{"version":3,"file":"UserMoveModal-D42cB00R.js","sources":["../../../app/components/ui/modals/UserMoveModal.tsx"],"sourcesContent":["import { Form, Input, Label } from '@components/ui';\nimport { Modal } from '@components/ui/modals/Modal';\nimport { useLoaderData, useNavigate, useSearchParams } from '@remix-run/react';\nimport { useState } from 'react';\nimport { MoveType } from '@prisma/client';\nimport type { editUserMoveLoaderFn } from '@routes/_withNav+/_withSideBar+/_manage+/.server/move.queries';\n\ntype EditUserModalProps = {\n  cancelUrl?: string | number;\n  variant: 'edit' | 'start';\n};\n\nexport default function UserMoveModal({\n  cancelUrl,\n  variant,\n}: EditUserModalProps) {\n  const { user, filteredOrgs } = useLoaderData<typeof editUserMoveLoaderFn>();\n  const [searchParams, setSearch] = useSearchParams();\n  const navigate = useNavigate();\n\n  const moveTypeQuery = searchParams.get('type') ?? MoveType.PCS;\n\n  const [variantState] = useState(variant);\n\n  const isPcsMove =\n    moveTypeQuery === MoveType.PCS || user.moveType === MoveType.PCS;\n\n  const [ isNextOrg, setIsNextOrg ] = useState('');\n\n  const handleNextOrg = (event) => {\n    setIsNextOrg(event.target.value);\n  };\n\n  const isDisabled = isNextOrg !== 'default' ? false : true;\n\n  return (\n    <Modal\n      onClose={() => {\n        if (cancelUrl) {\n          if (typeof cancelUrl === 'string') {\n            searchParams.delete('type');\n            navigate( {\n              pathname: cancelUrl,\n              search: searchParams.toString(),\n            } );\n          }\n        } else {\n          navigate( -1 );\n        }\n      }}>\n      <Form method=\"post\">\n        <Input.Hidden name=\"userId\" value={user.id} />\n        <Input.Hidden name=\"currentOrgId\" value={user.currentOrg.uuid} />\n        <Modal.Body>\n          <Modal.Title>\n            {variantState === 'start' ? 'Start' : 'Edit'} move for {user.name}\n          </Modal.Title>\n          <Form.Row>\n            <Label htmlFor=\"pcsMoveType\">Type of Move</Label>\n            <Input.Radiobox\n              label=\"PCS\"\n              name=\"moveType\"\n              id=\"pcsMoveType\"\n              value={MoveType.PCS}\n              defaultChecked={isPcsMove}\n              onClick={() => {\n                setSearch((prev) => {\n                  prev.set('type', MoveType.PCS);\n                  return prev;\n                });\n              }}/>\n            <Input.Radiobox\n              label=\"PCA\"\n              name=\"moveType\"\n              id=\"pcaMoveType\"\n              value={MoveType.PCA}\n              defaultChecked={!isPcsMove}\n              onClick={() => {\n                setSearch((prev) => {\n                  prev.set('type', MoveType.PCA);\n                  return prev;\n                });\n              }}/>\n          </Form.Row>\n          <Form.Row>\n            <Label htmlFor=\"nextOrg\">Next Organization</Label>\n            <Input.Select\n              name=\"nextOrg\"\n              options={filteredOrgs}\n              valueKey=\"uuid\"\n              defaultValue={user.nextOrg?.uuid}\n              onChange={(event) => handleNextOrg(event)}/>\n          </Form.Row>\n        </Modal.Body>\n\n        <Modal.Buttons link=\"/org\" value=\"edit\" navigateToUrl={-1} disabled={isDisabled}>\n          {variantState === 'start' ? 'Start' : 'Save'}\n        </Modal.Buttons>\n      </Form>\n    </Modal>\n  );\n}\n"],"names":["UserMoveModal","cancelUrl","variant","user","filteredOrgs","useLoaderData","searchParams","setSearch","useSearchParams","navigate","useNavigate","moveTypeQuery","MoveType","variantState","useState","isPcsMove","isNextOrg","setIsNextOrg","handleNextOrg","event","isDisabled","jsx","Modal","jsxs","Form","Input","Label","prev","_a"],"mappings":"8oBAYA,SAAwBA,EAAc,CACpC,UAAAC,EACA,QAAAC,CACF,EAAuB,OACrB,KAAM,CAAE,KAAAC,EAAM,aAAAC,CAAa,EAAIC,EAA2C,EACpE,CAACC,EAAcC,CAAS,EAAIC,EAAgB,EAC5CC,EAAWC,EAAY,EAEvBC,EAAgBL,EAAa,IAAI,MAAM,GAAKM,EAAS,SAAA,IAErD,CAACC,CAAY,EAAIC,EAAA,SAASZ,CAAO,EAEjCa,EACJJ,IAAkBC,EAAA,SAAS,KAAOT,EAAK,WAAaS,EAAAA,SAAS,IAEzD,CAAEI,EAAWC,CAAa,EAAIH,EAAAA,SAAS,EAAE,EAEzCI,EAAiBC,GAAU,CAClBF,EAAAE,EAAM,OAAO,KAAK,CACjC,EAEMC,EAAaJ,IAAc,UAG/B,OAAAK,EAAA,IAACC,EAAA,CACC,QAAS,IAAM,CACTrB,EACE,OAAOA,GAAc,WACvBK,EAAa,OAAO,MAAM,EAChBG,EAAA,CACR,SAAUR,EACV,OAAQK,EAAa,SAAS,CAAA,CAC9B,GAGJG,EAAU,EAAG,CAEjB,EACA,SAAAc,EAAA,KAACC,EAAK,CAAA,OAAO,OACX,SAAA,CAAAH,MAACI,EAAM,OAAN,CAAa,KAAK,SAAS,MAAOtB,EAAK,GAAI,EAC5CkB,MAACI,EAAM,OAAN,CAAa,KAAK,eAAe,MAAOtB,EAAK,WAAW,KAAM,EAC/DoB,EAAAA,KAACD,EAAM,KAAN,CACC,SAAA,CAACC,EAAAA,KAAAD,EAAM,MAAN,CACE,SAAA,CAAAT,IAAiB,QAAU,QAAU,OAAO,aAAWV,EAAK,IAAA,EAC/D,EACAoB,EAAAA,KAACC,EAAK,IAAL,CACC,SAAA,CAACH,EAAA,IAAAK,EAAA,CAAM,QAAQ,cAAc,SAAY,eAAA,EACzCL,EAAA,IAACI,EAAM,SAAN,CACC,MAAM,MACN,KAAK,WACL,GAAG,cACH,MAAOb,EAAS,SAAA,IAChB,eAAgBG,EAChB,QAAS,IAAM,CACbR,EAAWoB,IACJA,EAAA,IAAI,OAAQf,EAAAA,SAAS,GAAG,EACtBe,EACR,CAAA,CACH,CAAE,EACJN,EAAA,IAACI,EAAM,SAAN,CACC,MAAM,MACN,KAAK,WACL,GAAG,cACH,MAAOb,EAAS,SAAA,IAChB,eAAgB,CAACG,EACjB,QAAS,IAAM,CACbR,EAAWoB,IACJA,EAAA,IAAI,OAAQf,EAAAA,SAAS,GAAG,EACtBe,EACR,CAAA,CACH,CAAA,CAAE,EACN,EACAJ,EAAAA,KAACC,EAAK,IAAL,CACC,SAAA,CAACH,EAAA,IAAAK,EAAA,CAAM,QAAQ,UAAU,SAAiB,oBAAA,EAC1CL,EAAA,IAACI,EAAM,OAAN,CACC,KAAK,UACL,QAASrB,EACT,SAAS,OACT,cAAcwB,EAAAzB,EAAK,UAAL,YAAAyB,EAAc,KAC5B,SAAWT,GAAUD,EAAcC,CAAK,CAAA,CAAA,CAAE,CAC9C,CAAA,CAAA,EACF,EAECE,EAAA,IAAAC,EAAM,QAAN,CAAc,KAAK,OAAO,MAAM,OAAO,cAAe,GAAI,SAAUF,EAClE,SAAiBP,IAAA,QAAU,QAAU,MACxC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAEJ"}