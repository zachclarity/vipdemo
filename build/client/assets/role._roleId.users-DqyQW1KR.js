import{r as n,j as e}from"./index-CGKE_yqd.js";import"./index-CPe-BBEd.js";import{U as h}from"./constants-DpBRbtn9.js";import{F as j,a as w}from"./ChevronUpIcon-C1_-dFAd.js";import{H as v,G as y,U as N,K as z,j as F}from"./combobox-ZyOtD84C.js";import{z as k}from"./transition-DpAM4Mvv.js";import{a as p,g as U,u as C,A as f}from"./components-BktKjo96.js";import{E as S}from"./ErrorReport-DufojM8E.js";import"./Input-qJnTyjxU.js";import{M as m}from"./Modal-BilbC_tq.js";import"./index-browser-BzJTmVxG.js";import"./calculate-active-index-B9zBCtTZ.js";import"./portal-5Px_MhHe.js";import"./active-element-history-2tBiaAce.js";import"./node-B4O4sgZ3.js";import"./index-BIjbdFWj.js";import"./Buttons-PCh2vdNK.js";import"./useGenerateSearchParams-DHzu1JTo.js";import"./dialog-cts_RZz3.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new t.Error().stack;r&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[r]="f103b219-8539-46b4-8776-6793fe479af9",t._sentryDebugIdIdentifier="sentry-dbid-f103b219-8539-46b4-8776-6793fe479af9")}catch{}})();function A({title:t,titleId:r,...a},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),t?n.createElement("title",{id:r},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const I=n.forwardRef(A);function E(){return e.jsx("div",{className:"animate-pulse space-y-2",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"h-10 flex-grow bg-gradient-to-r from-zinc-50 to-zinc-100 rounded-full"}),e.jsx("div",{className:"h-10 w-24 bg-gradient-to-r from-zinc-50 to-zinc-100 rounded-full"})]})})}function L(){return e.jsxs("div",{className:"animate-pulse space-y-2 m-4",children:[e.jsx("div",{className:"w-24 rounded-full h-10 bg-gradient-to-r from-zinc-50 to-zinc-100"}),e.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[e.jsx("div",{className:"h-10 w-full flex-grow bg-gradient-to-r from-zinc-50 to-zinc-100 rounded-full"}),e.jsx("div",{className:"h-10 w-full flex-grow bg-gradient-to-r from-zinc-50 to-zinc-100 rounded-full"})]})]})}function B({dropdownOptions:t,formName:r,className:a,fetcher:s,isLoading:o}){const[d,u]=n.useState(null),[x,c]=n.useState("");n.useEffect(()=>{s.state==="submitting"&&(u(null),c(""))},[s]);const g=x!==""?t.filter(i=>i.name.toLowerCase().includes(x.toLowerCase())):t;function b(i){return!i||!d?"":i.rank?`${h[i.rank].abb} ${i.name}`:i.name}return e.jsx("div",{className:`${a}`,children:e.jsx(v,{immediate:!0,disabled:s.state!=="idle"||o,value:d,onChange:u,virtual:{options:g},onClose:()=>c(""),name:r,children:({open:i})=>e.jsxs("div",{className:"relative",children:[e.jsx(y,{placeholder:"Please select a member",displayValue:b,onChange:l=>c(l.target.value),className:"relative w-full bg-white py-1.5 pl-3 pr-10 text-left text-slate-900 focus:outline-none focus:ring-indigo-500/20 sm:text-sm sm:leading-6 rounded-md border-slate-300 text-xs shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50"}),e.jsx(N,{className:"group absolute inset-y-0 right-0 px-2.5 border-l border-l-slate-300",children:({open:l})=>e.jsxs(e.Fragment,{children:[l&&e.jsx(j,{className:"size-4 fill-slate-900","aria-hidden":"true"}),!l&&e.jsx(w,{className:"size-4 fill-slate-900","aria-hidden":"true"})]})}),e.jsx(k,{show:i,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:e.jsx(z,{anchor:{to:"bottom start"},className:"[--anchor-max-height:45vh] absolute z-10 w-[30rem] mt-1 overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm",children:({option:l})=>e.jsx(F,{className:"cursor-default w-full select-none py-2 pl-10 pr-4 text-gray-900 hover:cursor-pointer data-[active]:bg-blue-300 data-[active]:bg-opacity-60 data-[selected]:bg-zinc-800/20",value:l,children:e.jsxs("span",{className:"block truncate 'font-normal'",children:[h[l.rank].abb," ",l.name]})},`${l.id}-combo-option`)})})]})})})}function D({orgRoleId:t,users:r}){const a=p(),s=U(),o=n.useMemo(()=>s.some(d=>d.state!=="idle"),[s]);return e.jsxs(a.Form,{method:"POST",className:"flex gap-2 items-center",children:[e.jsx("input",{type:"hidden",name:"orgRoleId",value:t}),e.jsx(B,{dropdownOptions:r,isLoading:o,formName:"newUser",fetcher:a,className:"flex-grow"}),e.jsxs("button",{name:"_action",value:"addUser",id:"submitButton",type:"submit",className:"inline-flex w-32 px-3 py-5 leading-6 h-8 w- justify-center items-center rounded-md bg-green-600 text-white text-sm font-semibold  shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-green-500",children:[a.state!=="idle"&&e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 size-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding"]}),a.state==="idle"&&e.jsx(e.Fragment,{children:"Assign"})]})]})}function _({user:t,currentUser:r,orgRoleId:a}){const s=p();return e.jsxs("li",{className:"flex justify-between items-center px-5 h-12 even:bg-neutral-100",children:[e.jsx("p",{className:"truncate h-6",children:t.name}),e.jsxs("div",{className:"whitespace-nowrap w-10 flex items-center align-middle justify-items-center justify-center",children:[t.id===r&&e.jsx("span",{className:"font-normal text-xs rounded-xl bg-blue-500 text-white px-3 py-[0.15rem] self-center",children:"You"}),t.id!==r&&e.jsxs(s.Form,{method:"POST",children:[e.jsx("input",{type:"hidden",name:"userId",value:t.id}),e.jsx("input",{type:"hidden",name:"orgRoleId",value:a}),s.state!=="idle"&&e.jsx(e.Fragment,{children:e.jsxs("svg",{className:"animate-spin -ml-1 size-5 items-center rounded-md bg-white text-sm font-semibold text-gray-900 shadow-sm sm:mt-0 sm:w-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),s.state==="idle"&&e.jsx("button",{name:"_action",value:"delete",disabled:s.state!=="idle",className:"inline-flex text-red-700 p-1 items-center cursor-pointer w-full justify-center drop-shadow-none rounded-md text-sm font-semibold hover:bg-red-200 hover:drop-shadow sm:mt-0 sm:w-auto",children:e.jsx(e.Fragment,{children:e.jsx(I,{className:"size-6","aria-hidden":"true"})})})]})]})]})}function M({users:t,currentUser:r,orgRoleId:a}){return e.jsx(e.Fragment,{children:e.jsx("ul",{className:"w-full divide-y overflow-auto max-h-[60vh]",children:t.map(s=>e.jsx(_,{currentUser:r,user:s,orgRoleId:a},s.id))})})}const re=()=>{const{users:t,orgRole:r,currentUser:a}=C();return e.jsxs(m,{children:[e.jsx("div",{className:"mb-5",children:e.jsx(n.Suspense,{fallback:e.jsx(L,{}),children:e.jsx(f,{resolve:r,children:s=>e.jsxs(e.Fragment,{children:[e.jsxs(m.Title,{className:"pt-4 pb-3 px-5 bg-gradient-to-r from-neutral-100 to-neutral-50 border-b border-b-1 border-b-neutral-200/80",children:["Assigning Users to:"," ",e.jsx("p",{className:"text-lg h-6 truncate",children:s.role.name})]}),e.jsx("input",{type:"hidden",name:"orgRoleId",value:s.uuid}),e.jsx("input",{type:"hidden",name:"_action",value:"edit"}),e.jsxs("section",{className:"w-full space-y-4 divide-neutral-200/80 px-4",children:[e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"mb-2 font-semibold text-left w-full",children:"Assign a User"}),e.jsx(n.Suspense,{fallback:e.jsx(E,{}),children:e.jsx(f,{resolve:t,children:o=>e.jsxs(e.Fragment,{children:[o.length>0&&e.jsx(e.Fragment,{children:e.jsx(D,{users:o,orgRoleId:s.uuid})}),o.length===0&&e.jsx("p",{className:"mt-2 p-2 text-sm border-t border-t-1",children:"No users available to assign."})]})})})]}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-left font-semibold w-full pb-2 border-b border-b-1 border-b-neutral-200/80 ",children:"Assigned Users"}),s.users.length===0&&e.jsx("p",{className:"m-2 text-sm",children:"No users have been assigned."}),(s==null?void 0:s.users.length)>0&&e.jsx(M,{users:s==null?void 0:s.users,currentUser:a,orgRoleId:s.uuid})]})]})]})})})}),e.jsx(m.Buttons,{type:"button",hideCancelBtn:!0,variant:"outline",children:"Done"})]})},ae=S;export{ae as ErrorBoundary,re as default};
//# sourceMappingURL=role._roleId.users-DqyQW1KR.js.map
