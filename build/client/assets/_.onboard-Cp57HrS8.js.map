{"version":3,"file":"_.onboard-Cp57HrS8.js","sources":["../../../app/routes/_withNav+/_withSideBar+/_manage+/user+/_.onboard.tsx"],"sourcesContent":["import ActionMenu, { ActionMenuLink } from '@components/ui/ActionMenu';\nimport ErrorReport from '@components/ui/ErrorReport';\nimport PageHeader from '@components/ui/PageHeader';\nimport { Table } from '@components/ui/table/Table';\nimport { useRootLayoutData } from '@lib/hooks/useMatchesData';\nimport { Attribute } from '@lib/utils';\nimport { json, type LoaderFunctionArgs } from '@remix-run/node';\nimport { Outlet, useLoaderData } from '@remix-run/react';\nimport { requireUser } from '@services/user.server';\nimport useIsAdmin from '@lib/hooks/useIsAdmin';\nimport { getOnboardingUsers } from './.server/user.queries';\nimport { UserRank } from '@lib/constants';\nimport React from 'react';\n\nexport async function loader({ request }: LoaderFunctionArgs) {\n  await requireUser(request, {\n    permissions: Attribute.MEMBERS_READWRITEDELETE,\n  });\n\n  const users = await getOnboardingUsers();\n\n  return json({\n    users,\n  });\n}\n\nexport default function OnboardingUserIndex() {\n  const { users } = useLoaderData<typeof loader>();\n  const roles = useRootLayoutData('roles');\n\n  const { isAdmin } = useIsAdmin(roles);\n\n  const tableContents = [\n    {\n      header: 'Rank',\n      key: 'rank',\n      render: (rank: string) => {\n        return UserRank[rank].abb;\n      },\n    },\n    {\n      header: 'Name',\n      key: 'name',\n    },\n    {\n      header: 'Email',\n      key: 'workEmail',\n    },\n    {\n      header: 'Requested Organization',\n      key: 'requestedOrg.name',\n    },\n  ];\n\n  return (\n    <>\n      <div className=\"mb-5\">\n        <PageHeader pageTitle=\"Onboarding Users\" />\n        <div>\n          {users.length > 0 && (\n            <Table cells={tableContents}>\n              <Table.HeaderRow></Table.HeaderRow>\n              <Table.Body>\n                {users\n                  .sort((a, b) => a.name.localeCompare(b.name))\n                  .map((user) => (\n                    <>\n                      <Table.Row item={user} key={user.id}>\n                        <Table.ButtonCell>\n                          <ActionMenu key={`action-menu-${user.id}`}>\n                            <ActionMenuLink\n                              text=\"Onboard User\"\n                              url={`${user.id}`}/>\n                            {isAdmin && (\n                              <ActionMenuLink\n                                text=\"Delete User Account\"\n                                type=\"danger\"\n                                url={{\n                                  pathname: 'delete',\n                                  searchParams: { userId: user.id },\n                                }}/>\n                            )}\n                          </ActionMenu>\n                        </Table.ButtonCell>\n                      </Table.Row>\n                    </>\n                  ))}\n              </Table.Body>\n            </Table>\n          )}\n          {users.length === 0 && <p>No Users found.</p>}\n        </div>\n      </div>\n      <Outlet />\n    </>\n  );\n}\nexport const ErrorBoundary = ErrorReport;\n"],"names":["OnboardingUserIndex","users","useLoaderData","roles","useRootLayoutData","isAdmin","useIsAdmin","tableContents","header","key","render","rank","UserRank","abb","jsxs","Fragment","children","className","jsx","PageHeader","pageTitle","length","Table","cells","HeaderRow","Body","sort","a","b","name","localeCompare","map","user","Row","item","ButtonCell","ActionMenu","ActionMenuLink","text","url","id","type","pathname","searchParams","userId","Outlet","ErrorBoundary","ErrorReport"],"mappings":"2kCA0BA,SAAwBA,GAAsB,CACtC,KAAA,CAAEC,MAAAA,CAAM,EAAIC,EAA6B,EACzCC,EAAQC,EAAkB,OAAO,EAEjC,CAAEC,QAAAA,CAAQ,EAAIC,EAAWH,CAAK,EAE9BI,EAAgB,CACpB,CACEC,OAAQ,OACRC,IAAK,OACLC,OAASC,GACAC,EAASD,CAAI,EAAEE,GAE1B,EACA,CACEL,OAAQ,OACRC,IAAK,MACP,EACA,CACED,OAAQ,QACRC,IAAK,WACP,EACA,CACED,OAAQ,yBACRC,IAAK,mBACP,CAAA,EAGF,OAEIK,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAA,CAACF,EAAA,KAAA,MAAA,CAAIG,UAAU,OACbD,SAAA,CAACE,EAAA,IAAAC,EAAA,CAAWC,UAAU,kBAAmB,CAAA,SACxC,MACE,CAAAJ,SAAA,CAAAf,EAAMoB,OAAS,GACbP,EAAAA,KAAAQ,EAAA,CAAMC,MAAOhB,EACZS,SAAA,CAACE,EAAA,IAAAI,EAAME,UAAN,CAAA,CAAgB,EAChBN,EAAAA,IAAAI,EAAMG,KAAN,CACET,SACEf,EAAAyB,KAAK,CAACC,EAAGC,IAAMD,EAAEE,KAAKC,cAAcF,EAAEC,IAAI,CAAC,EAC3CE,IAAKC,GAEFd,EAAA,IAAAH,WAAA,CAAAC,SAAAE,EAAAA,IAACI,EAAMW,IAAN,CAAUC,KAAMF,EACfhB,SAACE,EAAAA,IAAAI,EAAMa,WAAN,CACCnB,gBAACoB,EACC,CAAApB,SAAA,CAAAE,EAAA,IAACmB,EAAA,CACCC,KAAK,eACLC,IAAK,GAAGP,EAAKQ,EAAE,GAAG,EACnBnC,GACCa,EAAA,IAACmB,EAAA,CACCC,KAAK,sBACLG,KAAK,SACLF,IAAK,CACHG,SAAU,SACVC,aAAc,CAAEC,OAAQZ,EAAKQ,EAAG,CAClC,CAAA,CAAE,CAAA,CAXS,EAAA,eAAeR,EAAKQ,EAAE,EAavC,CACF,CAAA,GAhB0BR,EAAKQ,EAiBjC,CACF,CAAA,CACD,CACL,CAAA,CAAA,CACF,CAAA,EAEDvC,EAAMoB,SAAW,GAAKH,EAAAA,IAAC,KAAEF,SAAe,iBAAA,CAAA,CAAA,CAC3C,CAAA,CAAA,EACF,QACC6B,EAAO,EAAA,CAAA,CACV,CAAA,CAEJ,CACO,MAAMC,EAAgBC"}